<div>
  <ng-container *ngFor="let item of displayedItems">
    <div class="m-2 p-1" *ngIf="item.data">
      <div class="d-flex justify-content-between">
        <div
          class="d-flex align-items-center justify-content-center pointer-cursor"
          (click)="goBack()"
        >
          <span class="me-2 d-flex align-items-center">
            <img src="../../../assets/images/icons/left-arrow.svg" alt="Back" />
          </span>
          <span class="me-1">
            <img
              [src]="item.image"
              alt="Profile Image"
              style="height: 35px; width: 40px"
            />
          </span>
          <b>
            <span class="back-btn-text text-capitalize">
              {{ item.data[item.displayProperty] || "N/A" | capitalizeFirst }}
            </span>
          </b>
        </div>
      </div>
    </div>
  </ng-container>

  <!-- <div class="bread-crumb">
    <p-breadcrumb [model]="breadCrumbItems"></p-breadcrumb>
  </div> -->
  <div *ngIf="loading">
    <app-preloader></app-preloader>
  </div>
  <div class="profile-details background-radial-gradient" *ngIf="leadsData">
    <div
      class="container-fluid pt-2 text-capitalize lead-card"
      *ngIf="!loading"
    >
      <div class="row g-3">
        <!-- <div class="col-md-4">
          <div class="card m-3 profile">
            <div class="profile-container">
              <div class="colored-half">
                <svg
                  data-name="Layer 1"
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 1200 120"
                  preserveAspectRatio="none"
                  class="svg"
                  style="
                    height: 69px;
                    width: 100%;
                    fill: rgb(20, 77, 133);
                    opacity: 0.8;
                    transform: rotateY(0deg);
                  "
                >
                  <path
                    d="M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z"
                  ></path>
                </svg>
              </div>
              <div class="image-container">
                <img
                  src="../../../../assets/images/profile/business-profile.png"
                  alt="Profile Picture"
                />
              </div>
            </div>
            <div *ngIf="leads" class="text-center mt-4 p-4 text-capitalize">
              <h3 *ngIf="leads[0]?.businessName" class="company-name">
                {{ leads[0]?.businessName | capitalizeFirst }}
              </h3>
              <p *ngIf="leads[0]?.businessEntity" class="company-type">
                {{ leads[0]?.businessEntity }}
              </p>
            </div>
          </div>
        </div>
        <div class="col-md-8">
          <div class="card m-3 p-4 profileinfo">
            <div class="card-header">Business Information</div>
            <div class="card-body" *ngIf="leads">
              <div class="row">
                <div class="col-md-6">
                  <div class="info-line" *ngIf="leads[0]?.natureOfBusiness">
                    <div class="label d-flex justify-content-between">
                      Nature of Business <b>:&nbsp;</b>
                    </div>
                    <div class="value">{{ leads[0]?.natureOfBusiness }}</div>
                  </div>
                  <div class="info-line" *ngIf="leads[0]?.product">
                    <div class="label d-flex justify-content-between">
                      Product <b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ leads[0]?.product | capitalizeFirst }}
                    </div>
                  </div>
                  <div class="info-line" *ngIf="leads[0]?.businessTurnover">
                    <div class="label d-flex justify-content-between">
                      Turn Over <b>:&nbsp;</b>
                    </div>
                    <div class="value">{{ leads[0]?.businessTurnover }}</div>
                  </div>
                  <div class="info-line" *ngIf="leads[0]?.loanRequirement">
                    <div class="label d-flex justify-content-between">
                      Loan Amount <b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ leads[0]?.loanRequirement | capitalizeFirst }}
                    </div>
                  </div>
                  <div class="info-line" *ngIf="leads[0]?.odRequirement">
                    <div class="label d-flex justify-content-between">
                      OD Amount <b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ leads[0]?.odRequirement | capitalizeFirst }}
                    </div>
                  </div>
                  <div
                    class="info-line"
                    *ngIf="leads[0]?.businessOperatingSince"
                  >
                    <div class="label d-flex justify-content-between">
                      Business Vintage <b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ leads[0]?.businessOperatingSince | capitalizeFirst }}
                    </div>
                  </div>
                  <div class="info-line" *ngIf="leads[0]?.city">
                    <div class="label d-flex justify-content-between">
                      City <b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ leads[0]?.city | capitalizeFirst }}
                    </div>
                  </div>
                  <div class="info-line" *ngIf="leads[0]?.contactPerson">
                    <div class="label d-flex justify-content-between">
                      Contact Person <b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ leads[0]?.contactPerson | capitalizeFirst }}
                    </div>
                  </div>
                  <div class="info-line" *ngIf="leads[0]?.primaryPhone">
                    <div class="label d-flex justify-content-between">
                      Primary Phone <b>:&nbsp;</b>
                    </div>
                    <div class="value">{{ leads[0]?.primaryPhone }}</div>
                  </div>
                  <div class="info-line" *ngIf="leads[0]?.secondaryPhone">
                    <div class="label d-flex justify-content-between">
                      Secondary Phone <b>:&nbsp;</b>
                    </div>
                    <div class="value">{{ leads[0]?.secondaryPhone }}</div>
                  </div>
                  <div class="info-line" *ngIf="leads[0]?.primaryPhone">
                    <div class="label d-flex justify-content-between">
                      Had Own House? <b>:&nbsp;</b>
                    </div>
                    <div class="value">{{ leads[0]?.hadOwnHouse }}</div>
                  </div>
                  <div class="info-line" *ngIf="leads[0]?.existingLoanDetails">
                    <div class="label d-flex justify-content-between">
                      Existing Loan Details <b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ leads[0]?.existingLoanDetails | capitalizeFirst }}
                    </div>
                  </div>
                  <div class="info-line" *ngIf="leads[0]?.calledFrom">
                    <div class="label d-flex justify-content-between">
                      Called From<b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ leads[0]?.calledFrom | capitalizeFirst }}
                    </div>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="info-line" *ngIf="leads[0]?.leadSource">
                    <div class="label d-flex justify-content-between">
                      Lead Source <b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ getLeadSourceName(leads[0]?.leadSource) }}
                    </div>
                  </div>
                  <div class="info-line" *ngIf="leads[0]?.sourcedBy">
                    <div class="label d-flex justify-content-between">
                      Sourced By<b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ getSourceName(leads[0]?.sourcedBy) }}
                    </div>
                  </div>
                  <div class="info-line" *ngIf="leads[0]?.createdBy">
                    <div class="label d-flex justify-content-between">
                      Created By<b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ leads[0]?.createdBy }}
                    </div>
                  </div>
                  <div class="info-line" *ngIf="leads[0]?.createdOn">
                    <div class="label d-flex justify-content-between">
                      Created On<b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ leads[0]?.createdOn | date : "MMM d, y, h:mm a" }}
                    </div>
                  </div>
                  <div class="info-line" *ngIf="leads[0]?.lastUpdatedBy">
                    <div class="label d-flex justify-content-between">
                      Last Updated By<b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ leads[0]?.lastUpdatedBy }}
                    </div>
                  </div>
                  <div class="info-line" *ngIf="leads[0]?.lastUpdatedOn">
                    <div class="label d-flex justify-content-between">
                      Last Updated On<b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ leads[0]?.lastUpdatedOn | date : "MMM d, y, h:mm a" }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="text-area" *ngIf="leads[0]?.remarks">
                <label for="remarksTextarea" class="form-label fw-bold"
                  >Remarks</label
                >
                <textarea
                  id="remarksTextarea"
                  class="form-control fw-bold text-capitalize"
                  rows="4"
                  placeholder="Enter your text here"
                  [readonly]="true"
                >
                {{ leads[0]?.remarks | capitalizeFirst }}</textarea
                >
              </div>
            </div>
          </div>
        </div> -->

        <div
          class="col-12 col-sm-12 col-md-9 col-lg-9 col-xl-9 mb-3"
          *ngIf="leadsData"
        >
          <div class="card shadow-sm rounded-2 custom-card mb-3 p-3">
            <div
              class="card-header bg-white border-bottom d-flex flex-column rounded-top-4"
            >
              <!-- First line: Business Name and Status -->
              <div
                class="d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center w-100"
              >
                <!-- Business Name -->
                <h5 class="mb-2 mb-md-0">
                  <b>
                    {{
                      (leadsData.leadData.businessName | capitalizeFirst) || "-"
                    }}</b
                  >
                </h5>

                <!-- Status Badge -->
                <div class="d-flex gap-2 align-items-center">
                  <small class="text-muted">Status:</small>
                  <span
                    class="badge p-2 rounded-3"
                    style="background-color: #e6e6f5; color: #13003a"
                  >
                    {{
                      leadsData.leadStatusName
                        ? leadsData.leadStatusName
                        : getStatusName(leadsData.leadData.leadInternalStatus)
                    }}
                  </span>
                </div>
              </div>

              <!-- Second line: Phone, Email, Location -->
              <small class="d-flex flex-wrap text-muted gap-3 mt-3">
                <!-- Phone -->
                <span
                  class="d-flex align-items-center gap-2"
                  *ngIf="leadsData?.leadData?.primaryPhone"
                >
                  <img
                    src="../../../../assets/images/icons/Phone.svg"
                    alt="Phone"
                    width="20"
                    height="20"
                  />

                  {{
                    userDetails.userType == 3
                      ? getMaskedPhone(leadsData?.leadData?.primaryPhone)
                      : leadsData?.leadData?.primaryPhone
                  }}
                  <ng-container *ngIf="leadsData?.leadData?.secondaryPhone">
                    ,
                    {{
                      userDetails.userType == 3
                        ? getMaskedPhone(leadsData?.leadData?.secondaryPhone)
                        : leadsData?.leadData?.secondaryPhone
                    }}
                  </ng-container>
                </span>

                <!-- Email -->
                <span
                  class="d-flex align-items-center gap-2 text-lowercase"
                  *ngIf="leadsData.leadData.businessEmail"
                >
                  <!-- <i class="fas fa-envelope"></i> -->
                  <img
                    src="../../../../assets/images/icons/mail.svg"
                    alt="Mail"
                    width="20"
                    height="20"
                  />

                  {{ leadsData.leadData.businessEmail }}
                </span>

                <!-- Location -->
                <span
                  class="d-flex align-items-center gap-2"
                  *ngIf="leadsData.leadData.city"
                >
                  <!-- <i class="fas fa-map-marker-alt"></i> -->
                  <img
                    src="../../../../assets/images/icons/location.svg"
                    alt="City"
                    width="20"
                    height="20"
                  />
                  {{ leadsData.leadData.city | capitalizeFirst }}
                </span>
              </small>
            </div>

            <div class="row mt-3">
              <div class="col-md-3 col-sm-4 col-6 mb-3">
                <div>
                  <div class="text-muted">Business Entity</div>
                  <div class="fw-bold">
                    {{
                      (getEntityName(leadsData.leadData.businessEntity)
                        | capitalizeFirst) || "-"
                    }}
                  </div>
                </div>
              </div>
              <div class="col-md-3 col-sm-4 col-6 mb-3">
                <div>
                  <div class="text-muted">Business Vintage</div>
                  <div class="fw-bold">
                    {{
                      (leadsData.leadData.businessOperatingSince
                        | capitalizeFirst) || "-"
                    }}
                  </div>
                </div>
              </div>
              <div class="col-md-3 col-sm-4 col-6 mb-3">
                <div>
                  <div class="text-muted">Nature of Business</div>
                  <div class="fw-bold">
                    {{
                      (leadsData.leadData.natureOfBusiness | capitalizeFirst) ||
                        "-"
                    }}
                  </div>
                </div>
              </div>
              <div class="col-md-3 col-sm-4 col-6 mb-3">
                <div>
                  <div class="text-muted">Product</div>
                  <div class="fw-bold">
                    {{ (leadsData.leadData.product | capitalizeFirst) || "-" }}
                  </div>
                </div>
              </div>
              <div class="col-md-3 col-sm-4 col-6 mb-3">
                <div>
                  <div class="text-muted">Turnover</div>
                  <div class="fw-bold">
                    {{
                      (leadsData.leadData.businessTurnover | capitalizeFirst) ||
                        "-"
                    }}
                  </div>
                </div>
              </div>
              <div class="col-md-3 col-sm-4 col-6 mb-3">
                <div>
                  <div class="text-muted">Contact Person</div>
                  <div class="fw-bold">
                    {{
                      (leadsData.leadData.contactPerson | capitalizeFirst) ||
                        "-"
                    }}
                  </div>
                </div>
              </div>
              <div
                class="col-md-3 col-sm-4 col-6 mb-3"
                *ngIf="leadsData.leadData.loanRequirement"
              >
                <div>
                  <div class="text-muted">Loan Requirement</div>
                  <div class="fw-bold">
                    {{
                      (leadsData.leadData.loanRequirement | capitalizeFirst) ||
                        "-"
                    }}
                  </div>
                </div>
              </div>
              <div
                class="col-md-3 col-sm-4 col-6 mb-3"
                *ngIf="leadsData.leadData.odRequirement"
              >
                <div>
                  <div class="text-muted">OD Requirement</div>
                  <div class="fw-bold">
                    {{
                      (leadsData.leadData.odRequirement | capitalizeFirst) ||
                        "-"
                    }}
                  </div>
                </div>
              </div>
              <div class="col-md-3 col-sm-4 col-6 mb-3">
                <div>
                  <div class="text-muted">Had Own House?</div>
                  <div class="fw-bold">
                    {{
                      (leadsData.leadData.hadOwnHouse | capitalizeFirst) || "-"
                    }}
                  </div>
                </div>
              </div>
              <div class="col-md-3 col-sm-4 col-6 mb-3">
                <div>
                  <div class="text-muted">Existing Loan Details</div>
                  <div class="fw-bold">
                    {{
                      (leadsData.leadData.existingLoanDetails
                        | capitalizeFirst) || "-"
                    }}
                  </div>
                </div>
              </div>
              <div class="col-md-3 col-sm-4 col-6 mb-3">
                <div>
                  <div class="text-muted">Called From</div>
                  <div class="fw-bold">
                    {{
                      (leadsData.leadData.calledFrom | capitalizeFirst) || "-"
                    }}
                  </div>
                </div>
              </div>
              <div class="col-md-3 col-sm-4 col-6 mb-3">
                <div>
                  <div class="text-muted">Lead Source</div>
                  <div class="fw-bold">
                    {{
                      (getLeadSourceName(leadsData.leadData.leadSource)
                        | capitalizeFirst) || "-"
                    }}
                  </div>
                </div>
              </div>
              <div class="col-md-3 col-sm-4 col-6 mb-3">
                <div>
                  <div class="text-muted">Last Updated</div>
                  <div class="fw-bold">
                    {{
                      leadsData.leadData.lastUpdatedOn
                        | date : "MMM d, y, h:mm a"
                    }}
                  </div>
                </div>
              </div>
              <div
                class="col-md-3 col-sm-4 col-6 mb-3"
                *ngIf="leadsData.leadData.sanctionedAmount"
              >
                <div>
                  <div class="text-muted">Sanctioned Amount</div>
                  <div class="fw-bold">
                    {{ leadsData.leadData.sanctionedAmount }} ({{
                      convertToLakhsOrCrores(
                        leadsData.leadData.sanctionedAmount
                      )
                    }})
                  </div>
                </div>
              </div>
              <div
                class="col-md-3 col-sm-4 col-6 mb-3"
                *ngIf="leadsData.leadData.disbursedAmount"
              >
                <div>
                  <div class="text-muted">Disbursed Amount</div>
                  <div class="fw-bold">
                    {{ leadsData.leadData.disbursedAmount }} ({{
                      convertToLakhsOrCrores(
                        leadsData.leadData.disbursedAmount
                      )
                    }})
                  </div>
                </div>
              </div>
              <!-- <div class="col-12 mb-3" *ngIf="leadsData.leadData.remarks">
                <div>
                  <div class="text-muted">Remarks</div>
                  <div class="fw-bold">
                    {{ (leadsData.leadData.remarks | capitalizeFirst) || "-" }}
                  </div>
                </div>
              </div> -->
              <div
                class="col-12 mb-3"
                *ngIf="leadsData.leadData.remarks !== undefined"
              >
                <div class="d-flex justify-content-between align-items-center">
                  <div class="text-muted">Remarks</div>

                  <div class="d-flex gap-2 align-items-center">
                    <!-- ✅ Save icon (only when editing) -->
                    <img
                      *ngIf="isEditingRemarks"
                      src="assets/images/icons/sanctions.svg"
                      width="24"
                      height="24"
                      alt="Save"
                      style="cursor: pointer"
                      pTooltip="Save Remarks"
                      tooltipPosition="top"
                      (click)="saveRemarks(leadsData.leadData.remarks)"
                    />

                    <!-- 🔁 Edit or Cancel icon -->
                    <img
                      *ngIf="userDetails?.userType != 3"
                      [src]="
                        'assets/images/icons/' +
                        (isEditingRemarks ? 'rejects.svg' : 'edit.svg')
                      "
                      width="20"
                      height="20"
                      [pTooltip]="isEditingRemarks ? 'Cancel' : 'Edit Remarks'"
                      tooltipPosition="top"
                      alt="Toggle Edit"
                      style="cursor: pointer"
                      (click)="isEditingRemarks = !isEditingRemarks"
                    />
                  </div>
                </div>

                <!-- 📝 Display remarks -->
                <div *ngIf="!isEditingRemarks" class="fw-bold mt-1">
                  {{ (leadsData.leadData.remarks | capitalizeFirst) || "-" }}
                </div>

                <!-- ✍️ Edit remarks -->
                <div *ngIf="isEditingRemarks" class="mt-1">
                  <textarea
                    class="form-control"
                    [(ngModel)]="leadsData.leadData.remarks"
                    rows="3"
                  ></textarea>
                </div>
              </div>
            </div>
          </div>
          <div class="mb-3">
            <ul class="nav nav-tabs px-2 pt-2 custom-tabs p-2" role="tablist">
              <li class="nav-item" role="presentation">
                <button
                  class="nav-link active"
                  data-bs-toggle="tab"
                  data-bs-target="#partials"
                  type="button"
                >
                  <img
                    src="../../../../assets/images/icons/files.svg"
                    alt="File"
                    width="20"
                    height="20"
                    class="me-1 tab-icon"
                  />
                  Partials
                </button>
              </li>
              <li class="nav-item" role="presentation">
                <button
                  class="nav-link"
                  data-bs-toggle="tab"
                  data-bs-target="#loanDetails"
                  type="button"
                >
                  <img
                    src="../../../../assets/images/icons/kyc.svg"
                    alt="File"
                    width="20"
                    height="20"
                    class="me-1 tab-icon"
                  />
                  KYC's
                </button>
              </li>
              <li class="nav-item" role="presentation">
                <button
                  class="nav-link"
                  data-bs-toggle="tab"
                  data-bs-target="#businessRecords"
                  type="button"
                >
                  <img
                    src="../../../../assets/images/icons/business.svg"
                    alt="File"
                    width="20"
                    height="20"
                    class="me-1 tab-icon"
                  />Business Records
                </button>
              </li>
              <li class="nav-item" role="presentation">
                <button
                  class="nav-link"
                  data-bs-toggle="tab"
                  data-bs-target="#creditDetails"
                  type="button"
                >
                  <img
                    src="../../../../assets/images/icons/credit.svg"
                    alt="File"
                    width="20"
                    height="20"
                    class="me-1 tab-icon"
                  />Credit Evaluation
                </button>
              </li>
              <li class="nav-item" role="presentation">
                <button
                  class="nav-link"
                  data-bs-toggle="tab"
                  data-bs-target="#lenderDetails"
                  type="button"
                >
                  <img
                    src="../../../../assets/images/icons/lender1.svg"
                    alt="File"
                    width="20"
                    height="20"
                    class="me-1 tab-icon"
                  />
                  Lender
                </button>
              </li>
            </ul>

            <div class="tab-content p-2">
              <!-- Loan Details Tab -->
              <div class="tab-pane fade show active" id="partials">
                <div class="accordion accordion-dark" id="documentsAccordion">
                  <!-- Bank Statements -->
                  <div *ngIf="leadsData?.documents == null">
                    <div class="text-center fw-bold">
                      <img
                        src="../../../../assets/images/menu/no-files.gif"
                        width="200"
                        height="200"
                      />
                      <p>No partials have been uploaded.</p>
                    </div>
                  </div>
                  <div *ngIf="leadsData?.documents">
                    <div class="accordion-item">
                      <h2 class="accordion-header" id="headingBank">
                        <button
                          class="accordion-button"
                          type="button"
                          data-bs-toggle="collapse"
                          data-bs-target="#collapseBank"
                          aria-expanded="true"
                          aria-controls="collapseBank"
                        >
                          Bank Statements
                        </button>
                      </h2>
                      <div
                        id="collapseBank"
                        class="accordion-collapse collapse show"
                        aria-labelledby="headingBank"
                        data-bs-parent="#documentsAccordion"
                      >
                        <div class="accordion-body">
                          <!-- Current Account Table -->

                          <div
                            *ngIf="
                              leadsData?.documents?.currentAccountStatements ==
                              null
                            "
                          >
                            <h6 class="text-primary mb-3">
                              Current Account statements
                            </h6>
                            <p>No data available.</p>
                          </div>
                          <div
                            *ngIf="
                              leadsData?.documents?.currentAccountStatements
                                ?.length > 0
                            "
                          >
                            <h6>Current Account Statements</h6>
                            <p-table
                              [value]="
                                leadsData?.documents?.currentAccountStatements
                              "
                              responsiveLayout="scroll"
                              class="custom-dark-table"
                            >
                              <!-- Header Template -->
                              <ng-template pTemplate="header">
                                <tr>
                                  <th>Bank Name</th>
                                  <th>From Date</th>
                                  <th>To Date</th>
                                  <th>Files</th>
                                </tr>
                              </ng-template>

                              <!-- Body Template -->
                              <ng-template let-stmt pTemplate="body">
                                <tr>
                                  <td>{{ stmt.name }}</td>
                                  <td>
                                    {{
                                      isValidDate(stmt.from)
                                        ? (stmt.from | date : "MMM dd, yyyy")
                                        : "-"
                                    }}
                                  </td>
                                  <td>
                                    {{
                                      isValidDate(stmt.to)
                                        ? (stmt.to | date : "MMM dd, yyyy")
                                        : "-"
                                    }}
                                  </td>
                                  <td>
                                    <div class="p-d-flex p-flex-wrap p-gap-2">
                                      <a
                                        *ngFor="
                                          let file of stmt.currentAccountStatements
                                        "
                                        [href]="'//' + file"
                                        target="_blank"
                                      >
                                        <i
                                          [class]="
                                            getFileIcon(file.split('.').pop())
                                          "
                                          class="file-icon me-2"
                                        ></i
                                      ></a>
                                    </div>
                                  </td>
                                </tr>
                              </ng-template>
                            </p-table>
                          </div>

                          <!-- OD Account Table -->
                          <div
                            class="mt-2"
                            *ngIf="
                              leadsData?.documents?.currentAccountStatements
                                ?.length > 0
                            "
                          >
                            <h6>OD Statements</h6>
                            <p-table
                              [value]="
                                leadsData?.documents?.odAccountStatements
                              "
                              responsiveLayout="scroll"
                              class="custom-dark-table"
                            >
                              <!-- Header Template -->
                              <ng-template pTemplate="header">
                                <tr>
                                  <th>Bank Name</th>
                                  <th>From Date</th>
                                  <th>To Date</th>
                                  <th>Files</th>
                                  <th>OD Limit</th>
                                  <th>Sanction Letter</th>
                                </tr>
                              </ng-template>

                              <!-- Body Template -->
                              <ng-template let-stmt pTemplate="body">
                                <tr>
                                  <td>{{ stmt.name || "-" }}</td>
                                  <td>
                                    {{
                                      isValidDate(stmt.from)
                                        ? (stmt.from | date : "MMM dd, yyyy")
                                        : "-"
                                    }}
                                  </td>
                                  <td>
                                    {{
                                      isValidDate(stmt.to)
                                        ? (stmt.to | date : "MMM dd, yyyy")
                                        : "-"
                                    }}
                                  </td>
                                  <td>
                                    <div class="p-d-flex p-flex-wrap p-gap-2">
                                      <a
                                        *ngFor="
                                          let file of stmt.odAccountStatements
                                        "
                                        [href]="'//' + file"
                                        target="_blank"
                                      >
                                        <i
                                          [class]="
                                            getFileIcon(file.split('.').pop())
                                          "
                                          class="file-icon me-2"
                                        ></i>
                                      </a>
                                    </div>
                                  </td>
                                  <td>{{ stmt.odlimit || "-" }}</td>
                                  <td>
                                    <a
                                      *ngFor="let file of stmt.odSactionLetter"
                                      [href]="'//' + file"
                                      target="_blank"
                                    >
                                      <i
                                        [class]="
                                          getFileIcon(file.split('.').pop())
                                        "
                                        class="file-icon me-2"
                                      ></i>
                                    </a>
                                  </td>
                                </tr>
                              </ng-template>
                            </p-table>
                          </div>
                          <div
                            *ngIf="
                              leadsData?.documents?.odAccountStatements == null
                            "
                          >
                            <h6 class="text-primary mb-3">
                              OD Account statements
                            </h6>
                            <p>No data available.</p>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- Financials -->
                    <div class="accordion-item">
                      <h2 class="accordion-header" id="headingFinancials">
                        <button
                          class="accordion-button collapsed"
                          type="button"
                          data-bs-toggle="collapse"
                          data-bs-target="#collapseFinancials"
                          aria-expanded="false"
                          aria-controls="collapseFinancials"
                        >
                          Financials
                        </button>
                      </h2>
                      <div
                        id="collapseFinancials"
                        class="accordion-collapse collapse"
                        aria-labelledby="headingFinancials"
                        data-bs-parent="#documentsAccordion"
                      >
                        <div class="accordion-body">
                          <div
                            *ngIf="
                              leadsData?.documents?.financialReturns == null
                            "
                          >
                            <p>No data available.</p>
                          </div>
                          <div
                            class="row"
                            *ngIf="leadsData?.documents?.financialReturns"
                          >
                            <!-- <h6 class="mb-3">Latest 2 Years ITRs</h6> -->
                            <!-- Past Income Tax Returns -->
                            <div class="col-md-6 mb-3">
                              <div class="card shadow-sm files-card">
                                <div class="card-body">
                                  <p>
                                    <strong>Year:</strong>

                                    {{
                                      leadsData?.documents?.financialReturns
                                        ? leadsData.documents
                                            .financialReturns[0]
                                            ?.pastIncomeTax || "-"
                                        : "-"
                                    }}
                                  </p>
                                  <div class="d-flex flex-wrap gap-2">
                                    <a
                                      *ngFor="
                                        let file of leadsData?.documents
                                          ?.financialReturns[0]
                                          ?.pastIncomeReturns
                                      "
                                      [href]="'//' + file"
                                      target="_blank"
                                    >
                                      <i
                                        [class]="
                                          getFileIcon(file.split('.').pop())
                                        "
                                        class="file-icon me-2"
                                      ></i>
                                    </a>
                                  </div>
                                </div>
                              </div>
                            </div>

                            <!-- Present Income Tax Returns -->
                            <div class="col-md-6 mb-3">
                              <div class="card shadow-sm files-card">
                                <div class="card-body">
                                  <p>
                                    <strong>Year:</strong>
                                    {{
                                      leadsData?.documents?.financialReturns[0]
                                        ?.presentIncomeTax
                                    }}
                                  </p>
                                  <div class="d-flex flex-wrap gap-2">
                                    <a
                                      *ngFor="
                                        let file of leadsData?.documents
                                          ?.financialReturns[0]
                                          ?.presentIncomeReturns
                                      "
                                      [href]="'//' + file"
                                      target="_blank"
                                    >
                                      <i
                                        [class]="
                                          getFileIcon(file.split('.').pop())
                                        "
                                        class="file-icon me-2"
                                      ></i>
                                    </a>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- GST Returns -->
                    <div class="accordion-item">
                      <h2 class="accordion-header" id="headingGST">
                        <button
                          class="accordion-button collapsed"
                          type="button"
                          data-bs-toggle="collapse"
                          data-bs-target="#collapseGST"
                          aria-expanded="false"
                          aria-controls="collapseGST"
                        >
                          GST Returns
                        </button>
                      </h2>
                      <div
                        id="collapseGST"
                        class="accordion-collapse collapse"
                        aria-labelledby="headingGST"
                        data-bs-parent="#documentsAccordion"
                      >
                        <div class="accordion-body">
                          <div *ngIf="leadsData?.documents?.gstDetails == null">
                            <p>No data available.</p>
                          </div>
                          <div
                            *ngIf="leadsData?.documents?.gstDetails?.length > 0"
                          >
                            <p-table
                              [value]="leadsData?.documents?.gstDetails"
                              responsiveLayout="scroll"
                              class="custom-dark-table"
                            >
                              <!-- Header Template -->
                              <ng-template pTemplate="header">
                                <tr>
                                  <th>Operating State</th>
                                  <th>Filing Period</th>
                                  <th>GSTR 3B Sale</th>
                                  <th>Attachments</th>
                                </tr>
                              </ng-template>

                              <!-- Body Template -->
                              <ng-template let-gst pTemplate="body">
                                <tr>
                                  <td>{{ gst.operatingState }}</td>
                                  <td>
                                    {{
                                      isValidDate(gst.filingPeriod)
                                        ? (gst.filingPeriod
                                          | date : "MMM dd, yyyy")
                                        : "-"
                                    }}
                                  </td>
                                  <td>
                                    {{
                                      gst?.gst3BSale ? "₹" + gst.gst3BSale : ""
                                    }}
                                  </td>
                                  <td>
                                    <div class="d-flex flex-wrap gap-2">
                                      <a
                                        *ngFor="let file of gst.gstDetails"
                                        [href]="'//' + file"
                                        target="_blank"
                                      >
                                        <i
                                          [class]="
                                            getFileIcon(file.split('.').pop())
                                          "
                                          class="file-icon me-2"
                                        ></i>
                                      </a>
                                    </div>
                                  </td>
                                </tr>
                              </ng-template>
                            </p-table>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- Existing Loans -->
                    <div class="accordion-item">
                      <h2 class="accordion-header" id="headingLoans">
                        <button
                          class="accordion-button collapsed"
                          type="button"
                          data-bs-toggle="collapse"
                          data-bs-target="#collapseLoans"
                          aria-expanded="false"
                          aria-controls="collapseLoans"
                        >
                          Existing Loans
                        </button>
                      </h2>
                      <div
                        id="collapseLoans"
                        class="accordion-collapse collapse"
                        aria-labelledby="headingLoans"
                        data-bs-parent="#documentsAccordion"
                      >
                        <div class="accordion-body">
                          <div
                            *ngIf="leadsData?.documents?.existingLoans == null"
                          >
                            <p>No data available.</p>
                          </div>
                          <div
                            class="mt-2"
                            *ngIf="
                              leadsData?.documents?.existingLoans?.length > 0
                            "
                          >
                            <p-table
                              [value]="leadsData?.documents?.existingLoans"
                              responsiveLayout="scroll"
                              class="custom-dark-table"
                            >
                              <!-- Header Template -->
                              <ng-template pTemplate="header">
                                <tr>
                                  <th>Bank Name</th>
                                  <th>Loan Type</th>
                                  <th>EMI Amount</th>
                                  <th>EMI Closing Date</th>
                                </tr>
                              </ng-template>

                              <!-- Body Template -->
                              <ng-template let-loan pTemplate="body">
                                <tr>
                                  <td>{{ loan.bankName }}</td>
                                  <td>{{ loan.loanType }}</td>
                                  <td>₹{{ loan.emiAmount }}</td>
                                  <td>
                                    {{
                                      isValidDate(loan.emiClosingDate)
                                        ? (loan.emiClosingDate
                                          | date : "MMM dd, yyyy")
                                        : "-"
                                    }}
                                  </td>
                                </tr>
                              </ng-template>
                            </p-table>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="tab-pane fade" id="loanDetails">
                <div class="accordion accordion-dark" id="kycAccordion">
                  <!-- KYC Documents -->
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="kycHeading">
                      <button
                        class="accordion-button"
                        type="button"
                        data-bs-toggle="collapse"
                        data-bs-target="#kycCollapse"
                        aria-expanded="true"
                        aria-controls="kycCollapse"
                      >
                        KYC Documents
                      </button>
                    </h2>
                    <div
                      id="kycCollapse"
                      class="accordion-collapse collapse show"
                      aria-labelledby="kycHeading"
                      data-bs-parent="#kycAccordion"
                    >
                      <div class="accordion-body">
                        <!-- Applicant Details -->
                        <div
                          *ngIf="
                            leadsData?.leadData?.businessEntity ==
                            'proprietorship'
                          "
                        >
                          <div class="row mb-4">
                            <div class="col-12">
                              <h5 class="text-secondary mb-3">
                                Applicant Details
                              </h5>
                            </div>

                            <div class="row mt-3 align-items-start">
                              <!-- Applicant Name & Photo -->
                              <div class="col-md-3 col-sm-4 col-6 mb-3">
                                <div class="text-muted mb-1">
                                  Applicant Name
                                </div>
                                <div class="d-flex align-items-center">
                                  <ng-container
                                    *ngIf="
                                      leadsData?.documents?.applicantPhoto
                                        ?.length > 0;
                                      else defaultImage
                                    "
                                  >
                                    <ng-container
                                      *ngIf="
                                        isImageFile(
                                          leadsData?.documents
                                            ?.applicantPhoto[0]
                                        );
                                        else fileIcon
                                      "
                                    >
                                      <a
                                        [href]="
                                          '//' +
                                          leadsData?.documents
                                            ?.applicantPhoto[0]
                                        "
                                        target="_blank"
                                      >
                                        <img
                                          [src]="
                                            '//' +
                                            leadsData?.documents
                                              ?.applicantPhoto[0]
                                          "
                                          alt="Applicant"
                                          class="rounded-circle border me-2"
                                          style="
                                            height: 40px;
                                            width: 40px;
                                            object-fit: cover;
                                          "
                                        />
                                      </a>
                                    </ng-container>
                                    <ng-template #fileIcon>
                                      <a
                                        [href]="
                                          '//' +
                                          leadsData?.documents
                                            ?.applicantPhoto[0]
                                        "
                                        target="_blank"
                                      >
                                        <i
                                          [class]="
                                            getFileIcon(
                                              leadsData?.documents?.applicantPhoto[0]
                                                .split('.')
                                                .pop()
                                            )
                                          "
                                          class="file-icon"
                                        ></i>
                                      </a>
                                    </ng-template>
                                  </ng-container>
                                  <ng-template #defaultImage>
                                    <img
                                      class="profile-img"
                                      src="../../../../assets/images/profile/profile.png"
                                      alt="Default Profile"
                                      style="
                                        height: 40px;
                                        width: 40px;
                                        object-fit: cover;
                                      "
                                    />
                                  </ng-template>
                                  <div class="fw-bold ml-1">
                                    {{
                                      (leadsData?.documents?.applicantName
                                        | capitalizeFirst) || "-"
                                    }}
                                  </div>
                                </div>
                              </div>

                              <!-- Aadhaar -->
                              <div class="col-md-3 col-sm-4 col-6 mb-3">
                                <div class="text-muted">Aadhaar</div>
                                <div
                                  class="fw-bold d-flex align-items-center gap-2"
                                >
                                  {{
                                    (leadsData?.documents?.aadhaar
                                      | capitalizeFirst) || "-"
                                  }}
                                  <ng-container
                                    *ngIf="
                                      leadsData?.documents?.aadharCard?.length >
                                      0
                                    "
                                  >
                                    <a
                                      *ngFor="
                                        let file of leadsData?.documents
                                          ?.aadharCard
                                      "
                                      [href]="'//' + file"
                                      target="_blank"
                                      class="text-decoration-none"
                                    >
                                      <i
                                        class="fa fa-id-card text-primary fs-20"
                                        title="Aadhaar Card"
                                      ></i>
                                    </a>
                                  </ng-container>
                                </div>
                              </div>
                              <!-- PAN -->
                              <div class="col-md-3 col-sm-4 col-6 mb-3">
                                <div class="text-muted">PAN</div>
                                <div
                                  class="fw-bold d-flex align-items-center gap-2"
                                >
                                  {{ leadsData?.documents?.pan || "-" }}
                                  <ng-container
                                    *ngIf="
                                      leadsData?.documents?.panCard?.length > 0
                                    "
                                  >
                                    <a
                                      *ngFor="
                                        let file of leadsData?.documents
                                          ?.panCard
                                      "
                                      [href]="'//' + file"
                                      target="_blank"
                                      class="text-decoration-none"
                                    >
                                      <i
                                        class="fa fa-credit-card text-success fs-20"
                                        title="PAN Card"
                                      ></i>
                                    </a>
                                  </ng-container>
                                </div>
                              </div>

                              <!-- Voter ID -->
                              <div class="col-md-3 col-sm-4 col-6 mb-3">
                                <div class="text-muted">Voter Card</div>
                                <div
                                  class="fw-bold d-flex align-items-center gap-2"
                                >
                                  <ng-container
                                    *ngIf="
                                      leadsData?.documents?.voterId?.length > 0
                                    "
                                  >
                                    <a
                                      *ngFor="
                                        let file of leadsData?.documents
                                          ?.voterId
                                      "
                                      [href]="'//' + file"
                                      target="_blank"
                                      class="text-decoration-none"
                                    >
                                      <i
                                        class="fa fa-address-card text-warning fs-20"
                                        title="Voter Card"
                                      ></i>
                                    </a>
                                  </ng-container>
                                  <span
                                    *ngIf="
                                      !leadsData?.documents?.voterId?.length
                                    "
                                    >-</span
                                  >
                                </div>
                              </div>
                            </div>
                          </div>

                          <hr class="my-4" />

                          <!-- Co-Applicant Details -->
                          <div class="row">
                            <div class="col-12">
                              <h5 class="text-secondary mb-3">
                                Co-Applicant Details
                              </h5>
                            </div>

                            <div class="row mt-3 align-items-start">
                              <!-- Co-Applicant Name -->
                              <div class="col-md-3 col-sm-4 col-6 mb-3">
                                <div class="text-muted">Co-Applicant Name</div>
                                <div class="d-flex align-items-center">
                                  <ng-container
                                    *ngIf="
                                      leadsData?.documents?.coApplicantPhoto
                                        ?.length > 0;
                                      else defaultImage
                                    "
                                  >
                                    <ng-container
                                      *ngIf="
                                        isImageFile(
                                          leadsData?.documents
                                            ?.coApplicantPhoto[0]
                                        );
                                        else fileIcon
                                      "
                                    >
                                      <a
                                        [href]="
                                          '//' +
                                          leadsData?.documents
                                            ?.coApplicantPhoto[0]
                                        "
                                        target="_blank"
                                      >
                                        <img
                                          [src]="
                                            '//' +
                                            leadsData?.documents
                                              ?.coApplicantPhoto[0]
                                          "
                                          alt="Applicant"
                                          class="rounded-circle border me-2"
                                          style="
                                            height: 40px;
                                            width: 40px;
                                            object-fit: cover;
                                          "
                                        />
                                      </a>
                                    </ng-container>
                                    <ng-template #fileIcon>
                                      <a
                                        [href]="
                                          '//' +
                                          leadsData?.documents
                                            ?.coApplicantPhoto[0]
                                        "
                                        target="_blank"
                                      >
                                        <i
                                          [class]="
                                            getFileIcon(
                                              leadsData?.documents?.coApplicantPhoto[0]
                                                .split('.')
                                                .pop()
                                            )
                                          "
                                          class="file-icon"
                                        ></i>
                                      </a>
                                    </ng-template>
                                  </ng-container>
                                  <ng-template #defaultImage>
                                    <img
                                      class="profile-img"
                                      src="../../../../assets/images/profile/profile.png"
                                      alt="Default Profile"
                                      style="
                                        height: 40px;
                                        width: 40px;
                                        object-fit: cover;
                                      "
                                    />
                                  </ng-template>
                                  <div class="fw-bold">
                                    {{
                                      (leadsData?.documents?.coApplicantName
                                        | capitalizeFirst) || "-"
                                    }}
                                    ({{
                                      (leadsData?.documents?.applicantRelation
                                        | capitalizeFirst) || "-"
                                    }})
                                  </div>
                                </div>
                                <div class="fw-bold"></div>
                              </div>

                              <!-- Mobile Number -->
                              <div class="col-md-3 col-sm-4 col-6 mb-3">
                                <div class="text-muted">Mobile Number</div>
                                <div class="fw-bold">
                                  {{
                                    leadsData?.documents?.coApplicantCibil
                                      ? leadsData.documents.coApplicantCibil[0]
                                          ?.mobileNumber || "-"
                                      : "-"
                                  }}
                                </div>
                              </div>

                              <!-- Co-Applicant Aadhaar -->
                              <div class="col-md-3 col-sm-4 col-6 mb-3">
                                <div class="text-muted">Aadhaar</div>
                                <div
                                  class="fw-bold d-flex align-items-center gap-2"
                                >
                                  {{
                                    leadsData?.documents?.coApplicantCibil
                                      ? leadsData.documents.coApplicantCibil[0]
                                          ?.aadharNumber || "-"
                                      : "-"
                                  }}

                                  <ng-container
                                    *ngIf="
                                      leadsData?.documents?.coApplicantAadhaar
                                        ?.length > 0
                                    "
                                  >
                                    <a
                                      *ngFor="
                                        let file of leadsData?.documents
                                          ?.coApplicantAadhaar
                                      "
                                      [href]="'//' + file"
                                      target="_blank"
                                      class="text-decoration-none"
                                    >
                                      <i
                                        class="fa fa-id-card text-primary fs-20"
                                        title="Aadhaar Card"
                                      ></i>
                                    </a>
                                  </ng-container>
                                </div>
                              </div>
                              <!-- Co-Applicant PAN -->
                              <div class="col-md-3 col-sm-4 col-6 mb-3">
                                <div class="text-muted">PAN</div>
                                <div
                                  class="fw-bold d-flex align-items-center gap-2"
                                >
                                  {{
                                    leadsData?.documents?.coApplicantCibil
                                      ? leadsData.documents.coApplicantCibil[0]
                                          ?.panNumber || "-"
                                      : "-"
                                  }}

                                  <ng-container
                                    *ngIf="
                                      leadsData?.documents?.coApplicantPan
                                        ?.length > 0
                                    "
                                  >
                                    <a
                                      *ngFor="
                                        let file of leadsData?.documents
                                          ?.coApplicantPan
                                      "
                                      [href]="'//' + file"
                                      target="_blank"
                                      class="text-decoration-none"
                                    >
                                      <i
                                        class="fa fa-credit-card text-success fs-20"
                                        title="PAN Card"
                                      ></i>
                                    </a>
                                  </ng-container>
                                </div>
                              </div>

                              <div class="col-md-3 col-sm-4 col-6 mb-3">
                                <div class="text-muted">Voter Card</div>
                                <div
                                  class="fw-bold d-flex align-items-center gap-2"
                                >
                                  <ng-container
                                    *ngIf="
                                      leadsData?.documents?.coApplicantVoterId
                                        ?.length > 0
                                    "
                                  >
                                    <a
                                      *ngFor="
                                        let file of leadsData?.documents
                                          ?.coApplicantVoterId
                                      "
                                      [href]="'//' + file"
                                      target="_blank"
                                      class="text-decoration-none"
                                    >
                                      <i
                                        class="fa fa-address-card text-warning fs-20"
                                        title="Voter Card"
                                      ></i>
                                    </a>
                                  </ng-container>
                                  <span
                                    *ngIf="
                                      !leadsData?.documents?.coApplicantVoterId
                                        ?.length
                                    "
                                    >-</span
                                  >
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <!-- Partner Details -->
                        <!-- PARTNERS KYC SECTION -->
                        <ng-container
                          *ngIf="
                            leadsData?.leadData?.businessEntity ===
                              'partnership' ||
                            leadsData?.leadData?.businessEntity === 'llp'
                          "
                        >
                          <div
                            class="row mt-4"
                            *ngIf="
                              leadsData?.documents?.partnerKycs?.length > 0;
                              else noPartnerData
                            "
                          >
                            <div
                              class="row align-items-start"
                              *ngFor="
                                let partner of leadsData?.documents?.partnerKycs
                              "
                            >
                              <!-- Partner Name & Photo -->
                              <div class="col-md-3 col-sm-4 col-6 mb-3">
                                <div class="text-muted">Partner Name</div>
                                <div class="d-flex align-items-center">
                                  <ng-container
                                    *ngIf="
                                      partner.partnerPhoto?.length > 0;
                                      else defaultImage
                                    "
                                  >
                                    <ng-container
                                      *ngIf="
                                        isImageFile(partner.partnerPhoto[0]);
                                        else fileIcon
                                      "
                                    >
                                      <a
                                        [href]="'//' + partner.partnerPhoto[0]"
                                        target="_blank"
                                      >
                                        <img
                                          [src]="'//' + partner.partnerPhoto[0]"
                                          alt="Partner"
                                          class="rounded-circle border me-2"
                                          style="
                                            height: 40px;
                                            width: 40px;
                                            object-fit: cover;
                                          "
                                        />
                                      </a>
                                    </ng-container>
                                    <ng-template #fileIcon>
                                      <a
                                        [href]="'//' + partner.partnerPhoto[0]"
                                        target="_blank"
                                      >
                                        <i
                                          [class]="
                                            getFileIcon(
                                              partner.partnerPhoto[0]
                                                .split('.')
                                                .pop()
                                            )
                                          "
                                          class="file-icon"
                                        ></i>
                                      </a>
                                    </ng-template>
                                  </ng-container>
                                  <ng-template #defaultImage>
                                    <img
                                      class="profile-img"
                                      src="../../../../assets/images/profile/profile.png"
                                      alt="Default Profile"
                                      style="
                                        height: 40px;
                                        width: 40px;
                                        object-fit: cover;
                                      "
                                    />
                                  </ng-template>
                                  <!-- <ng-container
                                    *ngIf="partner.partnerPhoto?.length > 0"
                                  >
                                    <img
                                      [src]="'//' + partner.partnerPhoto[0]"
                                      alt="Partner"
                                      class="rounded-circle border me-2"
                                      style="
                                        height: 40px;
                                        width: 40px;
                                        object-fit: cover;
                                      "
                                    />
                                  </ng-container> -->
                                  <div class="fw-bold ml-1">
                                    {{ partner.name || "-" }}
                                  </div>
                                </div>
                              </div>

                              <!-- Aadhaar -->
                              <div class="col-md-3 col-sm-4 col-6 mb-3">
                                <div class="text-muted">Aadhaar</div>
                                <div
                                  class="fw-bold d-flex align-items-center gap-2"
                                >
                                  {{ partner.aadharNumber || "-" }}
                                  <ng-container
                                    *ngIf="
                                      partner.partneraadharCard?.length > 0
                                    "
                                  >
                                    <a
                                      *ngFor="
                                        let file of partner.partneraadharCard
                                      "
                                      [href]="'//' + file"
                                      target="_blank"
                                      class="text-decoration-none"
                                    >
                                      <i
                                        class="fa fa-id-card text-primary fs-20"
                                        title="Aadhaar Card"
                                      ></i>
                                    </a>
                                  </ng-container>
                                </div>
                              </div>

                              <!-- PAN -->
                              <div class="col-md-3 col-sm-4 col-6 mb-3">
                                <div class="text-muted">PAN</div>
                                <div
                                  class="fw-bold d-flex align-items-center gap-2"
                                >
                                  {{ partner.panNumber || "-" }}
                                  <ng-container
                                    *ngIf="partner.partnerpanCard?.length > 0"
                                  >
                                    <a
                                      *ngFor="
                                        let file of partner.partnerpanCard
                                      "
                                      [href]="'//' + file"
                                      target="_blank"
                                      class="text-decoration-none"
                                    >
                                      <i
                                        class="fa fa-credit-card text-success fs-20"
                                        title="PAN Card"
                                      ></i>
                                    </a>
                                  </ng-container>
                                </div>
                              </div>

                              <!-- Voter ID -->
                              <div class="col-md-3 col-sm-4 col-6 mb-3">
                                <div class="text-muted">Voter Card</div>
                                <div
                                  class="fw-bold d-flex align-items-center gap-2"
                                >
                                  <ng-container
                                    *ngIf="partner.partnervoterId?.length > 0"
                                  >
                                    <a
                                      *ngFor="
                                        let file of partner.partnervoterId
                                      "
                                      [href]="'//' + file"
                                      target="_blank"
                                      class="text-decoration-none"
                                    >
                                      <i
                                        class="fa fa-address-card text-warning fs-20"
                                        title="Voter Card"
                                      ></i>
                                    </a>
                                  </ng-container>
                                  <span *ngIf="!partner.partnervoterId?.length"
                                    >-</span
                                  >
                                </div>
                              </div>
                            </div>
                          </div>

                          <!-- No Partner KYC Found -->
                        </ng-container>
                        <ng-template #noPartnerData>
                          <div class="text-center fw-bold">
                            <img
                              src="../../../../assets/images/menu/no-files.gif"
                              width="200"
                              height="200"
                            />
                            <p>No KYC's have been uploaded.</p>
                          </div>
                        </ng-template>
                        <!-- DIRECTORS KYC SECTION -->
                        <ng-container
                          *ngIf="
                            leadsData?.leadData?.businessEntity ==
                            'privateLimited'
                          "
                        >
                          <div
                            class="row mt-4"
                            *ngIf="
                              leadsData?.documents?.directorsKycs?.length > 0;
                              else noPartnerData
                            "
                          >
                            <div
                              class="row align-items-start"
                              *ngFor="
                                let director of leadsData?.documents
                                  ?.directorsKycs
                              "
                            >
                              <!-- Director Name & Photo -->
                              <div class="col-md-3 col-sm-4 col-6 mb-3">
                                <div class="text-muted">Director Name</div>
                                <div class="d-flex align-items-center">
                                  <ng-container
                                    *ngIf="
                                      director.directorPhoto?.length > 0;
                                      else defaultImage
                                    "
                                  >
                                    <ng-container
                                      *ngIf="
                                        isImageFile(director.directorPhoto[0]);
                                        else fileIcon
                                      "
                                    >
                                      <a
                                        [href]="
                                          '//' + director.directorPhoto[0]
                                        "
                                        target="_blank"
                                      >
                                        <img
                                          [src]="
                                            '//' + director.directorPhoto[0]
                                          "
                                          alt="Partner"
                                          class="rounded-circle border me-2"
                                          style="
                                            height: 40px;
                                            width: 40px;
                                            object-fit: cover;
                                          "
                                        />
                                      </a>
                                    </ng-container>
                                    <ng-template #fileIcon>
                                      <a
                                        [href]="
                                          '//' + director.directorPhoto[0]
                                        "
                                        target="_blank"
                                      >
                                        <i
                                          [class]="
                                            getFileIcon(
                                              director.directorPhoto[0]
                                                .split('.')
                                                .pop()
                                            )
                                          "
                                          class="file-icon"
                                        ></i>
                                      </a>
                                    </ng-template>
                                  </ng-container>
                                  <ng-template #defaultImage>
                                    <img
                                      class="profile-img"
                                      src="../../../../assets/images/profile/profile.png"
                                      alt="Default Profile"
                                      style="
                                        height: 40px;
                                        width: 40px;
                                        object-fit: cover;
                                      "
                                    />
                                  </ng-template>

                                  <!-- <ng-container
                                    *ngIf="director.directorPhoto?.length > 0"
                                  >
                                    <img
                                      [src]="'//' + director.directorPhoto[0]"
                                      alt="Director"
                                      class="rounded-circle border me-2"
                                      style="
                                        height: 40px;
                                        width: 40px;
                                        object-fit: cover;
                                      "
                                    />
                                  </ng-container> -->
                                  <div class="fw-bold ml-1">
                                    {{ director.name || "-" }}
                                  </div>
                                </div>
                              </div>

                              <!-- Aadhaar -->
                              <div class="col-md-3 col-sm-4 col-6 mb-3">
                                <div class="text-muted">Aadhaar</div>
                                <div
                                  class="fw-bold d-flex align-items-center gap-2"
                                >
                                  {{ director.aadharNumber || "-" }}
                                  <ng-container
                                    *ngIf="
                                      director.directoraadharCard?.length > 0
                                    "
                                  >
                                    <a
                                      *ngFor="
                                        let file of director.directoraadharCard
                                      "
                                      [href]="'//' + file"
                                      target="_blank"
                                      class="text-decoration-none"
                                    >
                                      <i
                                        class="fa fa-id-card text-primary fs-20"
                                        title="Aadhaar Card"
                                      ></i>
                                    </a>
                                  </ng-container>
                                </div>
                              </div>

                              <!-- PAN -->
                              <div class="col-md-3 col-sm-4 col-6 mb-3">
                                <div class="text-muted">PAN</div>
                                <div
                                  class="fw-bold d-flex align-items-center gap-2"
                                >
                                  {{ director.panNumber || "-" }}
                                  <ng-container
                                    *ngIf="director.directorpanCard?.length > 0"
                                  >
                                    <a
                                      *ngFor="
                                        let file of director.directorpanCard
                                      "
                                      [href]="'//' + file"
                                      target="_blank"
                                      class="text-decoration-none"
                                    >
                                      <i
                                        class="fa fa-credit-card text-success fs-20"
                                        title="PAN Card"
                                      ></i>
                                    </a>
                                  </ng-container>
                                </div>
                              </div>

                              <!-- Voter ID -->
                              <div class="col-md-3 col-sm-4 col-6 mb-3">
                                <div class="text-muted">Voter Card</div>
                                <div
                                  class="fw-bold d-flex align-items-center gap-2"
                                >
                                  <ng-container
                                    *ngIf="director.directorvoterId?.length > 0"
                                  >
                                    <a
                                      *ngFor="
                                        let file of director.directorvoterId
                                      "
                                      [href]="'//' + file"
                                      target="_blank"
                                      class="text-decoration-none"
                                    >
                                      <i
                                        class="fa fa-address-card text-warning fs-20"
                                        title="Voter Card"
                                      ></i>
                                    </a>
                                  </ng-container>
                                  <span
                                    *ngIf="!director.directorvoterId?.length"
                                    >-</span
                                  >
                                </div>
                              </div>
                            </div>
                          </div>

                          <!-- No Director KYC Found -->
                        </ng-container>
                      </div>
                    </div>
                  </div>

                  <div class="accordion-item">
                    <h2 class="accordion-header" id="supportingHeading">
                      <button
                        class="accordion-button collapsed"
                        type="button"
                        data-bs-toggle="collapse"
                        data-bs-target="#supportingCollapse"
                        aria-expanded="false"
                        aria-controls="supportingCollapse"
                      >
                        Other Documents
                      </button>
                    </h2>
                    <div
                      id="supportingCollapse"
                      class="accordion-collapse collapse"
                      aria-labelledby="supportingHeading"
                      data-bs-parent="#kycAccordion"
                    >
                      <div class="accordion-body">
                        <div class="row">
                          <div
                            class="col-md-3 col-sm-4 col-6 mb-3"
                            *ngIf="
                              leadsData?.documents?.residenceProof.length > 0
                            "
                          >
                            <div class="text-muted mb-1">Residence Proof</div>
                            <div class="d-flex align-items-center">
                              <div class="d-flex flex-wrap gap-2">
                                <a
                                  *ngFor="
                                    let file of leadsData?.documents
                                      ?.residenceProof
                                  "
                                  [href]="'//' + file"
                                  target="_blank"
                                >
                                  <i
                                    [class]="getFileIcon(file.split('.').pop())"
                                    class="file-icon me-2"
                                  ></i>
                                </a>
                              </div>
                            </div>
                          </div>

                          <div
                            *ngIf="
                              !leadsData?.documents?.residenceProof?.length
                            "
                            class="text-muted"
                          >
                            No Residence Proof Available.
                          </div>
                        </div>
                        <div class="row">
                          <div
                            class="col-md-3 col-sm-4 col-6 mb-3"
                            *ngFor="
                              let doc of leadsData?.documents?.otherDocuments
                            "
                          >
                            <div class="text-muted mb-1">{{ doc.name }}</div>
                            <div class="d-flex align-items-center">
                              <div class="d-flex flex-wrap gap-2">
                                <a
                                  *ngFor="let file of doc.otherAttachments"
                                  [href]="'//' + file"
                                  target="_blank"
                                >
                                  <i
                                    [class]="getFileIcon(file.split('.').pop())"
                                    class="file-icon me-2"
                                  ></i>
                                </a>
                              </div>
                            </div>
                          </div>

                          <div
                            *ngIf="
                              !leadsData?.documents?.otherDocuments?.length
                            "
                            class="text-muted"
                          >
                            No Other Documents Available.
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="tab-pane fade" id="businessRecords">
                <div
                  class="row"
                  *ngIf="
                    leadsData?.leadData?.businessEntity == 'proprietorship'
                  "
                >
                  <!-- GST Certificate -->
                  <div class="col-md-6 mb-4">
                    <div class="card shadow-sm files-card">
                      <div class="card-body">
                        <h6 class="mb-3">GST Certificate</h6>
                        <ng-container
                          *ngIf="
                            leadsData?.documents?.gstCertificate?.length;
                            else noGst
                          "
                        >
                          <div class="d-flex flex-wrap gap-2">
                            <a
                              *ngFor="
                                let file of leadsData?.documents?.gstCertificate
                              "
                              [href]="'//' + file"
                              target="_blank"
                            >
                              <i
                                [class]="getFileIcon(file.split('.').pop())"
                                class="file-icon me-2"
                              ></i>
                            </a>
                          </div>
                        </ng-container>
                        <ng-template #noGst>
                          <div class="text-warning">
                            No GST Certificate uploaded.
                          </div>
                        </ng-template>
                      </div>
                    </div>
                  </div>

                  <!-- Labour/Trade License -->
                  <div class="col-md-6 mb-4">
                    <div class="card shadow-sm files-card">
                      <div class="card-body">
                        <h6 class="mb-3">Labour / Trade License</h6>
                        <ng-container
                          *ngIf="
                            leadsData?.documents?.labourTradeLicense?.length;
                            else noLabour
                          "
                        >
                          <div class="d-flex flex-wrap gap-2">
                            <a
                              *ngFor="
                                let file of leadsData?.documents
                                  ?.labourTradeLicense
                              "
                              [href]="'//' + file"
                              target="_blank"
                            >
                              <i
                                [class]="getFileIcon(file.split('.').pop())"
                                class="file-icon me-2"
                              ></i>
                            </a>
                          </div>
                        </ng-container>
                        <ng-template #noLabour>
                          <div class="text-warning">
                            No Labour / Trade License uploaded.
                          </div>
                        </ng-template>
                      </div>
                    </div>
                  </div>

                  <!-- Udyam Certificate -->
                  <div class="col-md-6 mb-4">
                    <div class="card shadow-sm files-card">
                      <div class="card-body">
                        <h6 class="mb-3">Udyam (MSME) Certificate</h6>
                        <ng-container
                          *ngIf="
                            leadsData?.documents?.msmeUdyamCertificate?.length;
                            else noUdyam
                          "
                        >
                          <div class="d-flex flex-wrap gap-2">
                            <a
                              *ngFor="
                                let file of leadsData?.documents
                                  ?.msmeUdyamCertificate
                              "
                              [href]="'//' + file"
                              target="_blank"
                            >
                              <i
                                [class]="getFileIcon(file.split('.').pop())"
                                class="file-icon me-2"
                              ></i>
                            </a>
                          </div>
                        </ng-container>
                        <ng-template #noUdyam>
                          <div class="text-warning">
                            No Udyam Certificate uploaded.
                          </div>
                        </ng-template>
                      </div>
                    </div>
                  </div>

                  <!-- VAT / TIN / TOT -->
                  <div class="col-md-6 mb-4">
                    <div class="card shadow-sm files-card">
                      <div class="card-body">
                        <h6 class="mb-3">VAT / TIN / TOT Certificate</h6>
                        <ng-container
                          *ngIf="
                            leadsData?.documents?.vatTinTot?.length;
                            else noVat
                          "
                        >
                          <div class="d-flex flex-wrap gap-2">
                            <a
                              *ngFor="
                                let file of leadsData?.documents?.vatTinTot
                              "
                              [href]="'//' + file"
                              target="_blank"
                            >
                              <i
                                [class]="getFileIcon(file.split('.').pop())"
                                class="file-icon me-2"
                              ></i>
                            </a>
                          </div>
                        </ng-container>
                        <ng-template #noVat>
                          <div class="text-warning">
                            No VAT / TIN / TOT Certificate uploaded.
                          </div>
                        </ng-template>
                      </div>
                    </div>
                  </div>
                </div>

                <div
                  class="row"
                  *ngIf="
                    leadsData?.leadData?.businessEntity == 'privateLimited'
                  "
                >
                  <div class="col-md-6 mb-4">
                    <div class="card shadow-sm files-card">
                      <div class="card-body">
                        <h6 class="mb-3">Company PAN Card</h6>

                        <!-- PAN Number -->
                        <p
                          *ngIf="
                            leadsData?.documents?.companyPan[0]?.panNumber;
                            else noPanNumber
                          "
                        >
                          <strong>PAN Number:</strong>
                          {{ leadsData?.documents?.companyPan[0]?.panNumber }}
                        </p>
                        <ng-template #noPanNumber>
                          <div class="text-warning">
                            No PAN Number available.
                          </div>
                        </ng-template>

                        <!-- PAN Attachments -->
                        <ng-container
                          *ngIf="
                            leadsData?.documents?.companyPan[0]?.companyPan
                              ?.length;
                            else noPanAttachment
                          "
                        >
                          <div class="d-flex flex-wrap gap-2">
                            <a
                              *ngFor="
                                let file of leadsData?.documents?.companyPan[0]
                                  ?.companyPan
                              "
                              [href]="'//' + file"
                              target="_blank"
                            >
                              <i
                                [class]="getFileIcon(file.split('.').pop())"
                                class="file-icon me-2"
                              ></i>
                            </a>
                          </div>
                        </ng-container>
                        <ng-template #noPanAttachment>
                          <div class="text-warning">
                            No Company PAN Card uploaded.
                          </div>
                        </ng-template>
                      </div>
                    </div>
                  </div>
                  <!-- GST Certificate -->
                  <div class="col-md-6 mb-4">
                    <div class="card shadow-sm files-card">
                      <div class="card-body">
                        <h6 class="mb-3">GST Certificate</h6>
                        <ng-container
                          *ngIf="
                            leadsData?.documents?.companyGst?.length;
                            else noGst
                          "
                        >
                          <div class="d-flex flex-wrap gap-2">
                            <a
                              *ngFor="
                                let file of leadsData?.documents?.companyGst
                              "
                              [href]="'//' + file"
                              target="_blank"
                            >
                              <i
                                [class]="getFileIcon(file.split('.').pop())"
                                class="file-icon me-2"
                              ></i>
                            </a>
                          </div>
                        </ng-container>
                        <ng-template #noGst>
                          <div class="text-warning">
                            No GST Certificate uploaded.
                          </div>
                        </ng-template>
                      </div>
                    </div>
                  </div>

                  <div class="col-md-6 mb-4">
                    <div class="card shadow-sm files-card">
                      <div class="card-body">
                        <h6 class="mb-3">Incorporation Certificate</h6>
                        <ng-container
                          *ngIf="
                            leadsData?.documents?.incorporationCertificate
                              ?.length;
                            else noGst
                          "
                        >
                          <div class="d-flex flex-wrap gap-2">
                            <a
                              *ngFor="
                                let file of leadsData?.documents
                                  ?.incorporationCertificate
                              "
                              [href]="'//' + file"
                              target="_blank"
                            >
                              <i
                                [class]="getFileIcon(file.split('.').pop())"
                                class="file-icon me-2"
                              ></i>
                            </a>
                          </div>
                        </ng-container>
                        <ng-template #noGst>
                          <div class="text-warning">
                            No Incorporation Certificate uploaded.
                          </div>
                        </ng-template>
                      </div>
                    </div>
                  </div>

                  <!-- Labour/Trade License -->
                  <div class="col-md-6 mb-4">
                    <div class="card shadow-sm files-card">
                      <div class="card-body">
                        <h6 class="mb-3">Share Holding Pattern</h6>
                        <ng-container
                          *ngIf="
                            leadsData?.documents?.shareHoldingPattern?.length;
                            else noLabour
                          "
                        >
                          <div class="d-flex flex-wrap gap-2">
                            <a
                              *ngFor="
                                let file of leadsData?.documents
                                  ?.shareHoldingPattern
                              "
                              [href]="'//' + file"
                              target="_blank"
                            >
                              <i
                                [class]="getFileIcon(file.split('.').pop())"
                                class="file-icon me-2"
                              ></i>
                            </a>
                          </div>
                        </ng-container>
                        <ng-template #noLabour>
                          <div class="text-warning">
                            No Share Holding Pattern uploaded.
                          </div>
                        </ng-template>
                      </div>
                    </div>
                  </div>

                  <!-- Udyam Certificate -->
                  <div class="col-md-6 mb-4">
                    <div class="card shadow-sm files-card">
                      <div class="card-body">
                        <h6 class="mb-3">Udyam (MSME) Certificate</h6>
                        <ng-container
                          *ngIf="
                            leadsData?.documents?.companyMSMEUdyamCertificate
                              ?.length;
                            else noUdyam
                          "
                        >
                          <div class="d-flex flex-wrap gap-2">
                            <a
                              *ngFor="
                                let file of leadsData?.documents
                                  ?.companyMSMEUdyamCertificate
                              "
                              [href]="'//' + file"
                              target="_blank"
                            >
                              <i
                                [class]="getFileIcon(file.split('.').pop())"
                                class="file-icon me-2"
                              ></i>
                            </a>
                          </div>
                        </ng-container>
                        <ng-template #noUdyam>
                          <div class="text-warning">
                            No Udyam Certificate uploaded.
                          </div>
                        </ng-template>
                      </div>
                    </div>
                  </div>

                  <!-- VAT / TIN / TOT -->
                  <div class="col-md-6 mb-4">
                    <div class="card shadow-sm files-card">
                      <div class="card-body">
                        <h6 class="mb-3">MOA and AOA</h6>
                        <ng-container
                          *ngIf="
                            leadsData?.documents?.moaandaoa?.length;
                            else noVat
                          "
                        >
                          <div class="d-flex flex-wrap gap-2">
                            <a
                              *ngFor="
                                let file of leadsData?.documents?.moaandaoa
                              "
                              [href]="'//' + file"
                              target="_blank"
                            >
                              <i
                                [class]="getFileIcon(file.split('.').pop())"
                                class="file-icon me-2"
                              ></i>
                            </a>
                          </div>
                        </ng-container>
                        <ng-template #noVat>
                          <div class="text-warning">
                            No MOA and AOA Certificate udivloaded.
                          </div>
                        </ng-template>
                      </div>
                    </div>
                  </div>
                </div>

                <div
                  class="row"
                  *ngIf="
                    leadsData?.leadData?.businessEntity === 'partnership' ||
                    leadsData?.leadData?.businessEntity === 'llp'
                  "
                >
                  <div class="col-md-6 mb-4">
                    <div class="card shadow-sm files-card">
                      <div class="card-body">
                        <h6 class="mb-3">Firm PAN Card</h6>

                        <!-- PAN Number -->
                        <p
                          *ngIf="
                            leadsData?.documents?.firmPanCard[0]?.firmPan;
                            else noPanNumber
                          "
                        >
                          <strong>PAN Number:</strong>
                          {{ leadsData?.documents?.firmPanCard[0]?.firmPan }}
                        </p>
                        <ng-template #noPanNumber>
                          <div class="text-warning">
                            No PAN Number available.
                          </div>
                        </ng-template>

                        <!-- PAN Attachments -->
                        <ng-container
                          *ngIf="
                            leadsData?.documents?.firmPanCard[0]?.firmPanCard
                              ?.length;
                            else noPanAttachment
                          "
                        >
                          <div class="d-flex flex-wrap gap-2">
                            <a
                              *ngFor="
                                let file of leadsData?.documents?.firmPanCard[0]
                                  ?.firmPanCard
                              "
                              [href]="'//' + file"
                              target="_blank"
                            >
                              <i
                                [class]="getFileIcon(file.split('.').pop())"
                                class="file-icon me-2"
                              ></i>
                            </a>
                          </div>
                        </ng-container>
                        <ng-template #noPanAttachment>
                          <div class="text-warning">
                            No Firm PAN Card uploaded.
                          </div>
                        </ng-template>
                      </div>
                    </div>
                  </div>
                  <!-- GST Certificate -->
                  <div
                    class="col-md-6 mb-4"
                    *ngIf="
                      leadsData?.leadData?.businessEntity === 'partnership'
                    "
                  >
                    <div class="card shadow-sm files-card">
                      <div class="card-body">
                        <h6 class="mb-3">Firm Registration Certificate</h6>
                        <ng-container
                          *ngIf="
                            leadsData?.documents?.firmRegistrationCertificate
                              ?.length;
                            else noGst
                          "
                        >
                          <div class="d-flex flex-wrap gap-2">
                            <a
                              *ngFor="
                                let file of leadsData?.documents
                                  ?.firmRegistrationCertificate
                              "
                              [href]="'//' + file"
                              target="_blank"
                            >
                              <i
                                [class]="getFileIcon(file.split('.').pop())"
                                class="file-icon me-2"
                              ></i>
                            </a>
                          </div>
                        </ng-container>
                        <ng-template #noGst>
                          <div class="text-warning">
                            No Firm Registration Certificate uploaded.
                          </div>
                        </ng-template>
                      </div>
                    </div>
                  </div>
                  <div
                    class="col-md-6 mb-4"
                    *ngIf="leadsData?.leadData?.businessEntity === 'llp'"
                  >
                    <div class="card shadow-sm files-card">
                      <div class="card-body">
                        <h6 class="mb-3">Certificate of Registration</h6>
                        <ng-container
                          *ngIf="
                            leadsData?.documents?.llpCertificateofIncorporation
                              ?.length;
                            else noGst
                          "
                        >
                          <div class="d-flex flex-wrap gap-2">
                            <a
                              *ngFor="
                                let file of leadsData?.documents
                                  ?.llpCertificateofIncorporation
                              "
                              [href]="'//' + file"
                              target="_blank"
                            >
                              <i
                                [class]="getFileIcon(file.split('.').pop())"
                                class="file-icon me-2"
                              ></i>
                            </a>
                          </div>
                        </ng-container>
                        <ng-template #noGst>
                          <div class="text-warning">
                            No Certificate of Incorporation uploaded.
                          </div>
                        </ng-template>
                      </div>
                    </div>
                  </div>

                  <div
                    class="col-md-6 mb-4"
                    *ngIf="
                      leadsData?.leadData?.businessEntity === 'partnership'
                    "
                  >
                    <div class="card shadow-sm files-card">
                      <div class="card-body">
                        <h6 class="mb-3">Partnership Deed</h6>
                        <ng-container
                          *ngIf="
                            leadsData?.documents?.partnershipDeed?.length;
                            else noGst
                          "
                        >
                          <div class="d-flex flex-wrap gap-2">
                            <a
                              *ngFor="
                                let file of leadsData?.documents
                                  ?.partnershipDeed
                              "
                              [href]="'//' + file"
                              target="_blank"
                            >
                              <i
                                [class]="getFileIcon(file.split('.').pop())"
                                class="file-icon me-2"
                              ></i>
                            </a>
                          </div>
                        </ng-container>
                        <ng-template #noGst>
                          <div class="text-warning">
                            No Partnership Deed uploaded.
                          </div>
                        </ng-template>
                      </div>
                    </div>
                  </div>
                  <div
                    class="col-md-6 mb-4"
                    *ngIf="leadsData?.leadData?.businessEntity === 'llp'"
                  >
                    <div class="card shadow-sm files-card">
                      <div class="card-body">
                        <h6 class="mb-3">LLP Deed</h6>
                        <ng-container
                          *ngIf="
                            leadsData?.documents?.llpDeed?.length;
                            else noGst
                          "
                        >
                          <div class="d-flex flex-wrap gap-2">
                            <a
                              *ngFor="let file of leadsData?.documents?.llpDeed"
                              [href]="'//' + file"
                              target="_blank"
                            >
                              <i
                                [class]="getFileIcon(file.split('.').pop())"
                                class="file-icon me-2"
                              ></i>
                            </a>
                          </div>
                        </ng-container>
                        <ng-template #noGst>
                          <div class="text-warning">
                            No Partnership Deed uploaded.
                          </div>
                        </ng-template>
                      </div>
                    </div>
                  </div>

                  <!-- Labour/Trade License -->
                  <div class="col-md-6 mb-4">
                    <div class="card shadow-sm files-card">
                      <div class="card-body">
                        <h6 class="mb-3">Firm GST Certificate</h6>
                        <ng-container
                          *ngIf="
                            leadsData?.documents?.firmGstCertificate?.length;
                            else noLabour
                          "
                        >
                          <div class="d-flex flex-wrap gap-2">
                            <a
                              *ngFor="
                                let file of leadsData?.documents
                                  ?.firmGstCertificate
                              "
                              [href]="'//' + file"
                              target="_blank"
                            >
                              <i
                                [class]="getFileIcon(file.split('.').pop())"
                                class="file-icon me-2"
                              ></i>
                            </a>
                          </div>
                        </ng-container>
                        <ng-template #noLabour>
                          <div class="text-warning">
                            No Firm Gst Certificate uploaded.
                          </div>
                        </ng-template>
                      </div>
                    </div>
                  </div>

                  <!-- Udyam Certificate -->
                  <div class="col-md-6 mb-4">
                    <div class="card shadow-sm files-card">
                      <div class="card-body">
                        <h6 class="mb-3">Udyam (MSME) Certificate</h6>
                        <ng-container
                          *ngIf="
                            leadsData?.documents?.firmmsmeUdyamCertificate
                              ?.length;
                            else noUdyam
                          "
                        >
                          <div class="d-flex flex-wrap gap-2">
                            <a
                              *ngFor="
                                let file of leadsData?.documents
                                  ?.firmmsmeUdyamCertificate
                              "
                              [href]="'//' + file"
                              target="_blank"
                            >
                              <i
                                [class]="getFileIcon(file.split('.').pop())"
                                class="file-icon me-2"
                              ></i>
                            </a>
                          </div>
                        </ng-container>
                        <ng-template #noUdyam>
                          <div class="text-warning">
                            No Udyam Certificate uploaded.
                          </div>
                        </ng-template>
                      </div>
                    </div>
                  </div>

                  <!-- VAT / TIN / TOT -->
                  <!-- <div class="col-md-6 mb-4">
                    <div class="card shadow-sm files-card">
                      <div class="card-body">
                        <h6 class="mb-3">MOA and AOA</h6>
                        <ng-container
                          *ngIf="
                            leadsData?.documents?.moaandaoa?.length;
                            else noVat
                          "
                        >
                          <div class="d-flex flex-wrap gap-2">
                            <a
                              *ngFor="
                                let file of leadsData?.documents?.moaandaoa
                              "
                              [href]="'//' + file"
                              target="_blank"
                            >
                              <i
                                [class]="getFileIcon(file.split('.').pop())"
                                class="file-icon me-2"
                              ></i>
                            </a>
                          </div>
                        </ng-container>
                        <ng-template #noVat>
                          <div class="text-warning">
                            No MOA and AOA Certificate uploaded.
                          </div>
                        </ng-template>
                      </div>
                    </div>
                  </div> -->
                </div>
              </div>

              <div class="tab-pane fade" id="creditDetails">
                <div
                  *ngIf="!leadsData?.credits || leadsData.credits.length === 0"
                >
                  <div class="text-center fw-bold">
                    <img
                      src="../../../../assets/images/menu/no-data.gif"
                      width="200"
                      height="200"
                    />
                    <p>Credit Evaluation not Done</p>
                  </div>
                </div>

                <!-- Show details if credits exists and is not empty -->
                <div *ngIf="leadsData?.credits">
                  <div class="text-muted">
                    Credit Summary
                    <div class="fw-bold">
                      {{
                        (leadsData.credits.creditSummary | capitalizeFirst) ||
                          "-"
                      }}
                    </div>
                  </div>

                  <div class="row mt-3">
                    <div class="col-12 mt-2">
                      <h6 class="fw-bold">DSCR Ratio</h6>
                    </div>
                    <div class="col-md-3 col-sm-4 col-6 mb-3">
                      <div>
                        <div class="text-muted">Total EMI</div>
                        <div class="fw-bold">
                          {{
                            (leadsData.credits.totalEmi
                              | currency : "INR" : "symbol" : "1.0-0") || "-"
                          }}
                        </div>
                      </div>
                    </div>
                    <div class="col-md-3 col-sm-4 col-6 mb-3">
                      <div>
                        <div class="text-muted">Proposed EMI</div>
                        <div class="fw-bold">
                          {{
                            (leadsData.credits.proposedEmi
                              | currency : "INR" : "symbol" : "1.0-0") || "-"
                          }}
                        </div>
                      </div>
                    </div>
                    <div class="col-md-3 col-sm-4 col-6 mb-3">
                      <div>
                        <div class="text-muted">OD/CC Interest</div>
                        <div class="fw-bold">
                          {{
                            (leadsData.credits.odCcInterestAy1
                              | currency : "INR" : "symbol" : "1.0-0") || "-"
                          }}
                        </div>
                      </div>
                    </div>
                    <div>AY 2024 - 2025</div>
                    <div class="col-md-3 col-sm-4 col-6 mb-3">
                      <div>
                        <div class="text-muted">Turnover / Sales</div>
                        <div class="fw-bold">
                          {{
                            (leadsData.credits.turnoverAy1
                              | currency : "INR" : "symbol" : "1.0-0") || "-"
                          }}
                        </div>
                      </div>
                    </div>
                    <div class="col-md-3 col-sm-4 col-6 mb-3">
                      <div>
                        <div class="text-muted">Purchases</div>
                        <div class="fw-bold">
                          {{
                            (leadsData.credits.purchasesAy1
                              | currency : "INR" : "symbol" : "1.0-0") || "-"
                          }}
                        </div>
                      </div>
                    </div>
                    <div class="col-md-3 col-sm-4 col-6 mb-3">
                      <div>
                        <div class="text-muted">Profit After Tax</div>
                        <div class="fw-bold">
                          {{
                            (leadsData.credits.profitaftertaxAy1
                              | currency : "INR" : "symbol" : "1.0-0") || "-"
                          }}
                        </div>
                      </div>
                    </div>
                    <div class="col-md-3 col-sm-4 col-6 mb-3">
                      <div>
                        <div class="text-muted">Depreciation</div>
                        <div class="fw-bold">
                          {{
                            (leadsData.credits.depreciationAy1
                              | currency : "INR" : "symbol" : "1.0-0") || "-"
                          }}
                        </div>
                      </div>
                    </div>
                    <div class="col-md-3 col-sm-4 col-6 mb-3">
                      <div>
                        <div class="text-muted">Months</div>
                        <div class="fw-bold text-lowercase">
                          {{ leadsData.credits.monthsAy1 || "0" }} months
                        </div>
                      </div>
                    </div>
                    <div
                      class="col-md-3 col-sm-4 col-6 mb-3"
                      *ngIf="leadsData.credits.partnerRemuAy1"
                    >
                      <div>
                        <div class="text-muted">Partners Remuneration</div>
                        <div class="fw-bold">
                          {{
                            (leadsData.credits.partnerRemuAy1
                              | currency : "INR" : "symbol" : "1.0-0") || "-"
                          }}
                        </div>
                      </div>
                    </div>
                    <div
                      class="col-md-3 col-sm-4 col-6 mb-3"
                      *ngIf="leadsData.credits.directorsRemuAy1"
                    >
                      <div>
                        <div class="text-muted">Directors Remuneration</div>
                        <div class="fw-bold">
                          {{
                            (leadsData.credits.directorsRemuAy1
                              | currency : "INR" : "symbol" : "1.0-0") || "-"
                          }}
                        </div>
                      </div>
                    </div>
                    <div
                      class="col-md-3 col-sm-4 col-6 mb-3"
                      *ngIf="leadsData.credits.partnerInterestAy1"
                    >
                      <div>
                        <div class="text-muted">
                          Interest On Partners Capital
                        </div>
                        <div class="fw-bold">
                          {{
                            (leadsData.credits.partnerInterestAy1
                              | currency : "INR" : "symbol" : "1.0-0") || "-"
                          }}
                        </div>
                      </div>
                    </div>
                    <div>AY 2023 - 2024</div>
                    <div class="col-md-3 col-sm-4 col-6 mb-3">
                      <div>
                        <div class="text-muted">Turnover / Sales</div>
                        <div class="fw-bold">
                          {{
                            (leadsData.credits.turnoverAy2
                              | currency : "INR" : "symbol" : "1.0-0") || "-"
                          }}
                        </div>
                      </div>
                    </div>
                    <div class="col-md-3 col-sm-4 col-6 mb-3">
                      <div>
                        <div class="text-muted">Purchases</div>
                        <div class="fw-bold">
                          {{
                            (leadsData.credits.purchasesAy2
                              | currency : "INR" : "symbol" : "1.0-0") || "-"
                          }}
                        </div>
                      </div>
                    </div>
                    <div class="col-md-3 col-sm-4 col-6 mb-3">
                      <div>
                        <div class="text-muted">Profit After Tax</div>
                        <div class="fw-bold">
                          {{
                            (leadsData.credits.profitaftertaxAy2
                              | currency : "INR" : "symbol" : "1.0-0") || "-"
                          }}
                        </div>
                      </div>
                    </div>
                    <div class="col-md-3 col-sm-4 col-6 mb-3">
                      <div>
                        <div class="text-muted">Depreciation</div>
                        <div class="fw-bold">
                          {{
                            (leadsData.credits.depreciationAy2
                              | currency : "INR" : "symbol" : "1.0-0") || "-"
                          }}
                        </div>
                      </div>
                    </div>

                    <div
                      class="col-md-3 col-sm-4 col-6 mb-3"
                      *ngIf="leadsData.credits.partnerRemuAy2"
                    >
                      <div>
                        <div class="text-muted">Partners Remuneration</div>
                        <div class="fw-bold">
                          {{
                            (leadsData.credits.partnerRemuAy2
                              | currency : "INR" : "symbol" : "1.0-0") || "-"
                          }}
                        </div>
                      </div>
                    </div>
                    <div
                      class="col-md-3 col-sm-4 col-6 mb-3"
                      *ngIf="leadsData.credits.directorsRemuAy2"
                    >
                      <div>
                        <div class="text-muted">Directors Remuneration</div>
                        <div class="fw-bold">
                          {{
                            (leadsData.credits.directorsRemuAy2
                              | currency : "INR" : "symbol" : "1.0-0") || "-"
                          }}
                        </div>
                      </div>
                    </div>
                    <div
                      class="col-md-3 col-sm-4 col-6 mb-3"
                      *ngIf="leadsData.credits.partnerInterestAy2"
                    >
                      <div>
                        <div class="text-muted">
                          Interest On Partners Capital
                        </div>
                        <div class="fw-bold">
                          {{
                            (leadsData.credits.partnerInterestAy2
                              | currency : "INR" : "symbol" : "1.0-0") || "-"
                          }}
                        </div>
                      </div>
                    </div>
                    <div
                      class="col-md-3 col-sm-4 col-6 mb-3"
                      *ngIf="leadsData.credits.resultFirstYear"
                    >
                      <div>
                        <div class="text-muted">DSCR Ratio</div>
                        <div class="fw-bold">
                          {{ leadsData.credits.resultFirstYear || "-" }}
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row mt-3">
                    <p>Balance Sheet</p>

                    <div>AY 2023 - 2024</div>
                    <div class="col-md-3 col-sm-4 col-6 mb-3">
                      <div>
                        <div class="text-muted">Sundry Debtors</div>
                        <div class="fw-bold">
                          {{
                            (leadsData.credits.sundryDebtorsAy1
                              | currency : "INR" : "symbol" : "1.0-0") || "-"
                          }}
                        </div>
                      </div>
                    </div>
                    <div class="col-md-3 col-sm-4 col-6 mb-3">
                      <div>
                        <div class="text-muted">Sundry Creditors</div>
                        <div class="fw-bold">
                          {{
                            (leadsData.credits.sundryCreditorsAy1
                              | currency : "INR" : "symbol" : "1.0-0") || "-"
                          }}
                        </div>
                      </div>
                    </div>
                    <div class="col-md-3 col-sm-4 col-6 mb-3">
                      <div>
                        <div class="text-muted">Creditor Days</div>
                        <div class="fw-bold">
                          {{ leadsData.credits.creditor_daysFirstYear || "-" }}
                        </div>
                      </div>
                    </div>
                    <div class="col-md-3 col-sm-4 col-6 mb-3">
                      <div>
                        <div class="text-muted">Debtor Days</div>
                        <div class="fw-bold">
                          {{ leadsData.credits.debtor_daysFirstYear || "-" }}
                        </div>
                      </div>
                    </div>
                    <div>AY 2022 - 2023</div>
                    <div class="col-md-3 col-sm-4 col-6 mb-3">
                      <div>
                        <div class="text-muted">Sundry Debtors</div>
                        <div class="fw-bold">
                          {{
                            (leadsData.credits.sundryDebtorsAy2
                              | currency : "INR" : "symbol" : "1.0-0") || "-"
                          }}
                        </div>
                      </div>
                    </div>
                    <div class="col-md-3 col-sm-4 col-6 mb-3">
                      <div>
                        <div class="text-muted">Sundry Creditors</div>
                        <div class="fw-bold">
                          {{
                            (leadsData.credits.sundryCreditorsAy2
                              | currency : "INR" : "symbol" : "1.0-0") || "-"
                          }}
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row mt-3">
                    <h6 class="fw-bold">GST Program</h6>
                    <div class="col-md-3 col-sm-4 col-6 mb-3">
                      <div>
                        <div class="text-muted">GST Turnover</div>
                        <div class="fw-bold">
                          {{
                            (leadsData.credits.gstTurnover
                              | currency : "INR" : "symbol" : "1.0-0") || "-"
                          }}
                        </div>
                      </div>
                    </div>
                    <div class="col-md-3 col-sm-4 col-6 mb-3">
                      <div>
                        <div class="text-muted">Margin</div>
                        <div class="fw-bold">
                          {{
                            leadsData.credits.margin != null
                              ? leadsData.credits.margin + "%"
                              : "-"
                          }}
                        </div>
                      </div>
                    </div>
                    <div class="col-md-3 col-sm-4 col-6 mb-3">
                      <div>
                        <div class="text-muted">Months</div>
                        <div class="fw-bold text-lowercase">
                          {{ leadsData.credits.months || "0" }} months
                        </div>
                      </div>
                    </div>
                    <div class="col-md-3 col-sm-4 col-6 mb-3">
                      <div>
                        <div class="text-muted">Eligible EMI</div>
                        <div class="fw-bold">
                          {{
                            (leadsData.credits.gstValue
                              | currency : "INR" : "symbol" : "1.0-0") || "-"
                          }}
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row mt-3">
                    <p>BTO Program</p>

                    <div class="col-md-3 col-sm-4 col-6 mb-3">
                      <div>
                        <div class="text-muted">Banking Turnover</div>
                        <div class="fw-bold">
                          {{
                            (leadsData.credits.bankingTurnover
                              | currency : "INR" : "symbol" : "1.0-0") || "-"
                          }}
                        </div>
                      </div>
                    </div>
                    <div class="col-md-3 col-sm-4 col-6 mb-3">
                      <div>
                        <div class="text-muted">Margin</div>
                        <div class="fw-bold">
                          {{
                            leadsData.credits.btoMargin != null
                              ? leadsData.credits.btoMargin + "%"
                              : "-"
                          }}
                        </div>
                      </div>
                    </div>
                    <div class="col-md-3 col-sm-4 col-6 mb-3">
                      <div>
                        <div class="text-muted">Months</div>
                        <div class="fw-bold text-lowercase">
                          {{ leadsData.credits.btoMonths || "0" }} months
                        </div>
                      </div>
                    </div>
                    <div class="col-md-3 col-sm-4 col-6 mb-3">
                      <div>
                        <div class="text-muted">Eligible EMI</div>
                        <div class="fw-bold">
                          {{
                            (leadsData.credits.btoValue
                              | currency : "INR" : "symbol" : "1.0-0") || "-"
                          }}
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- <div
                    class="col-12 mb-3"
                    *ngIf="leadsData.credits.creditSummary"
                  >
                    <div>
                      <div class="text-muted">Credit Summary</div>
                      <div class="fw-bold">
                        {{ leadsData.credits.creditSummary || "-" }}
                      </div>
                    </div>
                  </div> -->
                </div>
              </div>
              <!-- Lender Details Tab -->
              <div class="tab-pane fade" id="lenderDetails">
                <!-- <button
                  class="btn btn-outline-primary mb-2"
                  (click)="toggleFullscreen()"
                >
                  {{ isFullscreen ? "Exit Fullscreen" : "View Fullscreen" }}
                </button> -->
                <!-- Safe and full-proof -->
                <div
                  *ngIf="
                    leadsData &&
                    (!leadsData.logins || leadsData.logins.length === 0)
                  "
                >
                  <div class="text-center fw-bold">
                    <img
                      src="../../../../assets/images/menu/no-data.gif"
                      width="200"
                      height="200"
                    />
                    <p>Lender Selection not Done</p>
                  </div>
                </div>
                <div
                  class="mt-2"
                  *ngIf="leadsData?.logins?.length > 0"
                  [ngClass]="{ 'z-screen': isFullscreen }"
                  class="fullscreen-wrapper"
                >
                  <p-table
                    [value]="leadsData?.logins"
                    [(selection)]="selectedRows"
                    dataKey="id"
                    responsiveLayout="scroll"
                    selectionMode="multiple"
                    class="custom-dark-table"
                  >
                    <!-- Header Template -->
                    <ng-template pTemplate="header">
                      <tr>
                        <th>ID</th>
                        <th>Program</th>
                        <th class="text-nowrap">Bank Name</th>
                        <th class="text-nowrap">Login Date</th>
                        <th class="text-nowrap">Login Status</th>
                        <th class="text-nowrap">Login Remarks</th>
                        <th class="text-nowrap">Sanction Date</th>
                        <th class="text-nowrap">Sanctioned Amount</th>
                        <th class="text-nowrap">Sanction Status</th>
                        <th class="text-nowrap">Sanction Remarks</th>
                        <th class="text-nowrap">LAN</th>
                        <th class="text-nowrap">ROI</th>
                        <th class="text-nowrap">Tenure</th>
                        <th class="text-nowrap">Process Code</th>
                        <th class="text-nowrap">Product Type</th>
                        <th class="text-nowrap">Disbursal Date</th>
                        <th class="text-nowrap">Disbursed Amount</th>
                        <th class="text-nowrap">Sanction Letter</th>
                        <th class="text-nowrap">Repayment Schedule</th>
                      </tr>
                    </ng-template>
                    <!-- Body Template -->
                    <ng-template
                      let-item
                      let-rowIndex="rowIndex"
                      pTemplate="body"
                    >
                      <tr
                        [pSelectableRow]="item"
                        [class.selected-row]="isRowSelected(item)"
                      >
                        <td>{{ rowIndex + 1 }}</td>
                        <td class="text-nowrap">{{ item.program || "-" }}</td>
                        <td class="text-nowrap">{{ item.bankName || "-" }}</td>
                        <td>
                          {{
                            item.loginDate
                              ? (item.loginDate | date : "MMM dd, yyyy")
                              : "-"
                          }}
                        </td>
                        <td>{{ item.fipStatus || "-" }}</td>
                        <td class="text-nowrap">
                          <div >
                            <span
                              [ngClass]="{
                                'single-line-ellipsis': !expandedRows[rowIndex]
                              }"
                              >{{ (item.fipRemarks | capitalizeFirst) || '-' }}</span
                            >
                            <a
                              *ngIf="
                                item.fipRemarks && item.fipRemarks.length > 10
                              "
                              href="javascript:void(0)"
                              class="ms-1"
                              (click)="toggleRow(rowIndex)"
                            >
                              {{
                                expandedRows[rowIndex]
                                  ? "Show less"
                                  : "Show more"
                              }}
                            </a>
                          </div>
                        </td>
                        <td>
                          {{
                            item.approvalDate
                              ? (item.approvalDate | date : "MMM dd, yyyy")
                              : "-"
                          }}
                        </td>
                        <td>
                          {{
                            item.sanctionedAmount
                              ? "₹" + item.sanctionedAmount
                              : "-"
                          }}
                        </td>
                        <td>{{ item.approvedStatus || "-" }}</td>
                        <td class="text-nowrap">
                          <div >
                            <span
                              [ngClass]="{
                                'single-line-ellipsis':
                                  !expandedRows[rowIndex + '-a']
                              }"
                              >{{ (item.approvedRemarks | capitalizeFirst) || '-' }}</span
                            >
                            <a
                              *ngIf="
                                item.approvedRemarks &&
                                item.approvedRemarks.length > 10
                              "
                              href="javascript:void(0)"
                              class="ms-1"
                              (click)="toggleRow(rowIndex + '-a')"
                            >
                              {{
                                expandedRows[rowIndex + "-a"]
                                  ? "Show less"
                                  : "Show more"
                              }}
                            </a>
                          </div>
                        </td>
                        <td>{{ item.lan || "-" }}</td>
                        <td>{{ item.roi || "-" }}</td>
                        <td>{{ item.tenure || "-" }}</td>
                        <td>{{ item.processCode || "-" }}</td>
                        <td>{{ item.productTypeName || "-" }}</td>
                        <td>
                          {{
                            item.disbursalDate
                              ? (item.disbursalDate | date : "MMM dd, yyyy")
                              : "-"
                          }}
                        </td>
                        <td>
                          {{
                            item.disbursedAmount
                              ? "₹" + item.disbursedAmount
                              : "-"
                          }}
                        </td>
                        <td>
                          <div class="d-flex flex-wrap gap-2">
                            <a
                              *ngFor="let file of item.sanctionedLetter"
                              [href]="'//' + file"
                              target="_blank"
                            >
                              <i
                                [class]="getFileIcon(file.split('.').pop())"
                                class="file-icon me-2"
                              ></i>
                            </a>
                          </div>
                        </td>
                        <td>
                          <div class="d-flex flex-wrap gap-2">
                            <a
                              *ngFor="let file of item.repaymentSchedule"
                              [href]="'//' + file"
                              target="_blank"
                            >
                              <i
                                [class]="getFileIcon(file.split('.').pop())"
                                class="file-icon me-2"
                              ></i>
                            </a>
                          </div>
                        </td>
                      </tr>
                    </ng-template>
                  </p-table>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-12 col-sm-12 col-md-3 col-lg-3 col-xl-3 mb-3 time">
          <div class="card shadow-sm rounded-3 mb-3 p-3">
            <div class="d-flex flex-column gap-3">
              <!-- Lead Sourced By -->
              <div>
                <div class="text-muted mb-1 fw-semibold small">Sourced By</div>
                <div
                  class="d-flex align-items-center gap-2 p-1 sourced-by-outline"
                >
                  <div class="circle-initial">
                    {{
                      getSourceName(leadsData?.leadData?.sourcedBy)?.charAt(0)
                        | uppercase
                    }}
                  </div>
                  <div class="fw-medium text-dark small">
                    {{ getSourceName(leadsData?.leadData?.sourcedBy) || "N/A" }}
                  </div>
                </div>
              </div>

              <!-- Added By -->
              <div>
                <div class="text-muted mb-1 fw-semibold small">Created By</div>
                <div
                  class="d-flex align-items-center gap-2 p-1 sourced-by-outline"
                >
                  <div class="circle-initial">
                    {{ leadsData?.leadData?.createdBy?.charAt(0) | uppercase }}
                  </div>
                  <div class="fw-medium text-dark small">
                    {{ leadsData?.leadData?.createdBy || "N/A" }}
                  </div>
                </div>
              </div>

              <!-- Updated By -->
              <div>
                <div class="text-muted mb-1 fw-semibold small">Updated By</div>
                <div
                  class="d-flex align-items-center gap-2 p-1 sourced-by-outline"
                >
                  <div class="circle-initial">
                    {{
                      leadsData?.leadData?.lastUpdatedBy?.charAt(0) | uppercase
                    }}
                  </div>
                  <div class="fw-medium text-dark small">
                    {{ leadsData?.leadData?.lastUpdatedBy || "N/A" }}
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="card mb-3 p-1">
            <p-timeline
              [value]="timelineEvents"
              layout="vertical"
              styleClass="custom-timeline"
              [align]="'left'"
            >
              <ng-template pTemplate="marker" let-event>
                <span class="custom-marker">
                  <img
                    [src]="event.image"
                    alt="Event Icon"
                    width="20"
                    height="20"
                    class="timeline-icon"
                  />
                </span>
              </ng-template>

              <ng-template pTemplate="opposite" let-event>
                <p class="text-muted p-1 date-text">
                  {{
                    event.date ? (event.date | date : "mediumDate") : "Pending"
                  }}
                </p>
              </ng-template>

              <ng-template pTemplate="content" let-event>
                <p class="p-1 title-text">{{ event.title }}</p>
              </ng-template>
            </p-timeline>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div
    class="profile-details background-radial-gradient"
    *ngIf="
      loanleads &&
      ((loanleads.loanType === 'personalLoan' &&
        loanleads.employmentStatus === 'employed') ||
        (loanleads.loanType === 'homeLoan' &&
          loanleads.employmentStatus === 'employed') ||
        (loanleads.loanType === 'lap' &&
          loanleads.employmentStatus === 'employed'))
    "
  >
    <div class="container-fluid" *ngIf="!loading">
      <div class="row g-2">
        <div class="col-md-4">
          <div class="card profile">
            <div class="profile-container">
              <div class="colored-half">
                <svg
                  data-name="Layer 1"
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 1200 120"
                  preserveAspectRatio="none"
                  class="svg"
                  style="
                    height: 69px;
                    width: 100%;
                    fill: rgb(20, 77, 133);
                    opacity: 0.8;
                    transform: rotateY(0deg);
                  "
                >
                  <path
                    d="M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z"
                  ></path>
                </svg>
              </div>
              <div class="image-container">
                <img
                  src="../../../../assets/images/profile/profile.png"
                  alt="Profile Picture"
                />
              </div>
            </div>
            <div *ngIf="loanleads" class="text-center mt-2 p-4 text-capitalize">
              <h3 *ngIf="loanleads?.contactPerson" class="company-name">
                {{ loanleads?.contactPerson | capitalizeFirst }}
              </h3>
              <p *ngIf="loanleads?.designation" class="company-type">
                {{ loanleads?.designation }}
              </p>
            </div>
          </div>
        </div>
        <div class="col-md-8">
          <div class="card profileinfo">
            <div class="card-header">Personal Information</div>
            <div class="card-body" *ngIf="loanleads">
              <div class="row">
                <div class="col-md-6">
                  <!-- <div class="info-line" *ngIf="loanleads?.designation">
                    <div class="label d-flex justify-content-between">
                      Designation <b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ loanleads?.designation | capitalizeFirst }}
                    </div>
                  </div> -->
                  <div class="info-line" *ngIf="loanleads?.salary">
                    <div class="label d-flex justify-content-between">
                      Salary (monthly) <b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ loanleads?.salary | capitalizeFirst }}
                    </div>
                  </div>
                  <div class="info-line" *ngIf="loanleads?.companyName">
                    <div class="label d-flex justify-content-between">
                      Company Name<b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ loanleads?.companyName | capitalizeFirst }}
                    </div>
                  </div>
                  <div class="info-line" *ngIf="loanleads?.jobExperience">
                    <div class="label d-flex justify-content-between">
                      Job Experience (years)<b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ loanleads?.jobExperience | capitalizeFirst }}
                    </div>
                  </div>
                  <div class="info-line" *ngIf="loanleads?.companyAddress">
                    <div class="label d-flex justify-content-between">
                      Company Address <b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ loanleads?.companyAddress | capitalizeFirst }}
                    </div>
                  </div>
                  <div class="info-line" *ngIf="loanleads?.city">
                    <div class="label d-flex justify-content-between">
                      City <b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ loanleads?.city | capitalizeFirst }}
                    </div>
                  </div>

                  <div class="info-line" *ngIf="loanleads?.primaryPhone">
                    <div class="label d-flex justify-content-between">
                      Primary Phone <b>:&nbsp;</b>
                    </div>
                    <div class="value">{{ loanleads?.primaryPhone }}</div>
                  </div>
                  <div class="info-line" *ngIf="loanleads?.secondaryPhone">
                    <div class="label d-flex justify-content-between">
                      Secondary Phone <b>:&nbsp;</b>
                    </div>
                    <div class="value">{{ loanleads?.secondaryPhone }}</div>
                  </div>
                  <div class="info-line" *ngIf="loanleads?.loanRequirement">
                    <div class="label d-flex justify-content-between">
                      Loan Requirement <b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ loanleads?.loanRequirement | capitalizeFirst }}
                    </div>
                  </div>
                  <div class="info-line" *ngIf="loanleads?.propertyType">
                    <div class="label d-flex justify-content-between">
                      Property Type <b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ loanleads?.propertyType | capitalizeFirst }}
                    </div>
                  </div>
                  <div class="info-line" *ngIf="loanleads?.propertyValue">
                    <div class="label d-flex justify-content-between">
                      Property Value <b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ loanleads?.propertyValue | capitalizeFirst }}
                    </div>
                  </div>
                  <div class="info-line" *ngIf="loanleads?.propertyLocation">
                    <div class="label d-flex justify-content-between">
                      Property Location <b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ loanleads?.propertyLocation | capitalizeFirst }}
                    </div>
                  </div>
                  <div class="info-line" *ngIf="loanleads?.primaryPhone">
                    <div class="label d-flex justify-content-between">
                      Had Own House? <b>:&nbsp;</b>
                    </div>
                    <div class="value">{{ loanleads?.hadOwnHouse }}</div>
                  </div>
                  <div class="info-line" *ngIf="loanleads?.calledFrom">
                    <div class="label d-flex justify-content-between">
                      Called From <b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ loanleads?.calledFrom | capitalizeFirst }}
                    </div>
                  </div>
                  <div class="info-line" *ngIf="loanleads?.existingLoanDetails">
                    <div class="label d-flex justify-content-between">
                      Existing Loan Details <b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ loanleads?.existingLoanDetails | capitalizeFirst }}
                    </div>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="info-line" *ngIf="loanleads?.leadSource">
                    <div class="label d-flex justify-content-between">
                      Lead Source <b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ getLeadSourceName(loanleads?.leadSource) }}
                    </div>
                  </div>
                  <div class="info-line" *ngIf="loanleads?.sourcedBy">
                    <div class="label d-flex justify-content-between">
                      Sourced By<b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ getSourceName(loanleads?.sourcedBy) }}
                    </div>
                  </div>
                  <div class="info-line" *ngIf="loanleads?.createdBy">
                    <div class="label d-flex justify-content-between">
                      Created By<b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ loanleads?.createdBy }}
                    </div>
                  </div>
                  <div class="info-line" *ngIf="loanleads?.createdOn">
                    <div class="label d-flex justify-content-between">
                      Created On<b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ loanleads?.createdOn | date : "MMM d, y, h:mm a" }}
                    </div>
                  </div>
                  <div class="info-line" *ngIf="loanleads?.lastUpdatedBy">
                    <div class="label d-flex justify-content-between">
                      Last Updated By<b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ loanleads?.lastUpdatedBy }}
                    </div>
                  </div>
                  <div class="info-line" *ngIf="loanleads?.lastUpdatedOn">
                    <div class="label d-flex justify-content-between">
                      Last Updated On<b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ loanleads?.lastUpdatedOn | date : "MMM d, y, h:mm a" }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="text-area" *ngIf="loanleads?.remarks">
                <label for="remarksTextarea" class="form-label fw-bold"
                  >Remarks</label
                >
                <textarea
                  id="remarksTextarea"
                  class="form-control fw-bold text-capitalize"
                  rows="4"
                  placeholder="Enter your text here"
                  [readonly]="true"
                >
                {{ loanleads?.remarks | capitalizeFirst }}</textarea
                >
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div
    class="profile-details background-radial-gradient"
    *ngIf="
      loanleads &&
      ((loanleads.loanType === 'homeLoan' &&
        loanleads.employmentStatus === 'self-employed') ||
        (loanleads.loanType === 'lap' &&
          loanleads.employmentStatus === 'self-employed'))
    "
  >
    <div class="container-fluid" *ngIf="!loading">
      <div class="row g-2">
        <div class="col-md-4">
          <div class="card profile">
            <div class="profile-container">
              <div class="colored-half">
                <svg
                  data-name="Layer 1"
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 1200 120"
                  preserveAspectRatio="none"
                  class="svg"
                  style="
                    height: 69px;
                    width: 100%;
                    fill: rgb(20, 77, 133);
                    opacity: 0.8;
                    transform: rotateY(0deg);
                  "
                >
                  <path
                    d="M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z"
                  ></path>
                </svg>
              </div>
              <div class="image-container">
                <img
                  src="../../../../assets/images/profile/business-profile.png"
                  alt="Profile Picture"
                />
              </div>
            </div>
            <div *ngIf="loanleads" class="text-center mt-4 p-4 text-capitalize">
              <h3 *ngIf="loanleads?.businessName" class="company-name">
                {{ loanleads?.businessName | capitalizeFirst }}
              </h3>
              <p *ngIf="loanleads?.businessEntity" class="company-type">
                {{ getEntityName(loanleads?.businessEntity) }}
              </p>
            </div>
          </div>
        </div>
        <div class="col-md-8">
          <div class="card profileinfo">
            <div class="card-header">Business Information</div>
            <div class="card-body" *ngIf="loanleads">
              <div class="row">
                <div class="col-md-6">
                  <div class="info-line" *ngIf="loanleads?.natureofBusiness">
                    <div class="label d-flex justify-content-between">
                      Nature of Business <b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ loanleads?.natureofBusiness }}
                    </div>
                  </div>
                  <div class="info-line" *ngIf="loanleads?.product">
                    <div class="label d-flex justify-content-between">
                      Product <b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ loanleads?.product | capitalizeFirst }}
                    </div>
                  </div>
                  <div class="info-line" *ngIf="loanleads?.businessTurnover">
                    <div class="label d-flex justify-content-between">
                      Turn Over <b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ loanleads?.businessTurnover }}
                    </div>
                  </div>
                  <div class="info-line" *ngIf="loanleads?.loanRequirement">
                    <div class="label d-flex justify-content-between">
                      Loan Amount <b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ loanleads?.loanRequirement | capitalizeFirst }}
                    </div>
                  </div>
                  <div class="info-line" *ngIf="loanleads?.odRequirement">
                    <div class="label d-flex justify-content-between">
                      OD Amount <b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ loanleads?.odRequirement | capitalizeFirst }}
                    </div>
                  </div>
                  <div class="info-line" *ngIf="loanleads?.propertyType">
                    <div class="label d-flex justify-content-between">
                      Property Type <b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ loanleads?.propertyType | capitalizeFirst }}
                    </div>
                  </div>
                  <div class="info-line" *ngIf="loanleads?.propertyValue">
                    <div class="label d-flex justify-content-between">
                      Property Value <b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ loanleads?.propertyValue | capitalizeFirst }}
                    </div>
                  </div>
                  <div class="info-line" *ngIf="loanleads?.propertyLocation">
                    <div class="label d-flex justify-content-between">
                      Property Location <b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ loanleads?.propertyLocation | capitalizeFirst }}
                    </div>
                  </div>
                  <div class="info-line" *ngIf="loanleads?.businessVintage">
                    <div class="label d-flex justify-content-between">
                      Business Vintage <b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ loanleads?.businessVintage | capitalizeFirst }}
                    </div>
                  </div>
                  <div class="info-line" *ngIf="loanleads?.city">
                    <div class="label d-flex justify-content-between">
                      City <b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ loanleads?.city | capitalizeFirst }}
                    </div>
                  </div>
                  <div class="info-line" *ngIf="loanleads?.contactPerson">
                    <div class="label d-flex justify-content-between">
                      Contact Person <b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ loanleads?.contactPerson | capitalizeFirst }}
                    </div>
                  </div>
                  <div class="info-line" *ngIf="loanleads?.primaryPhone">
                    <div class="label d-flex justify-content-between">
                      Primary Phone <b>:&nbsp;</b>
                    </div>
                    <div class="value">{{ loanleads?.primaryPhone }}</div>
                  </div>
                  <div class="info-line" *ngIf="loanleads?.secondaryPhone">
                    <div class="label d-flex justify-content-between">
                      Secondary Phone <b>:&nbsp;</b>
                    </div>
                    <div class="value">{{ loanleads?.secondaryPhone }}</div>
                  </div>
                  <div class="info-line" *ngIf="loanleads?.hadOwnHouse">
                    <div class="label d-flex justify-content-between">
                      Had Own House? <b>:&nbsp;</b>
                    </div>
                    <div class="value">{{ loanleads?.hadOwnHouse }}</div>
                  </div>
                  <div class="info-line" *ngIf="loanleads?.calledFrom">
                    <div class="label d-flex justify-content-between">
                      Called From <b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ loanleads?.calledFrom | capitalizeFirst }}
                    </div>
                  </div>
                  <div class="info-line" *ngIf="loanleads?.existingLoanDetails">
                    <div class="label d-flex justify-content-between">
                      Existing Loan Details <b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ loanleads?.existingLoanDetails | capitalizeFirst }}
                    </div>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="info-line" *ngIf="loanleads?.leadSource">
                    <div class="label d-flex justify-content-between">
                      Lead Source <b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ getLeadSourceName(loanleads?.leadSource) }}
                    </div>
                  </div>
                  <div class="info-line" *ngIf="loanleads?.sourcedBy">
                    <div class="label d-flex justify-content-between">
                      Sourced By<b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ getSourceName(loanleads?.sourcedBy) }}
                    </div>
                  </div>
                  <div class="info-line" *ngIf="loanleads?.createdBy">
                    <div class="label d-flex justify-content-between">
                      Created By<b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ loanleads?.createdBy }}
                    </div>
                  </div>
                  <div class="info-line" *ngIf="loanleads?.createdOn">
                    <div class="label d-flex justify-content-between">
                      Created On<b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ loanleads?.createdOn | date : "MMM d, y, h:mm a" }}
                    </div>
                  </div>
                  <div class="info-line" *ngIf="loanleads?.lastUpdatedBy">
                    <div class="label d-flex justify-content-between">
                      Last Updated By<b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ loanleads?.lastUpdatedBy }}
                    </div>
                  </div>
                  <div class="info-line" *ngIf="loanleads?.lastUpdatedOn">
                    <div class="label d-flex justify-content-between">
                      Last Updated On<b>:&nbsp;</b>
                    </div>
                    <div class="value">
                      {{ loanleads?.lastUpdatedOn | date : "MMM d, y, h:mm a" }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="text-area" *ngIf="loanleads?.remarks">
                <label for="remarksTextarea" class="form-label fw-bold"
                  >Remarks</label
                >
                <textarea
                  id="remarksTextarea"
                  class="form-control fw-bold text-capitalize"
                  rows="4"
                  placeholder="Enter your text here"
                  [readonly]="true"
                >
              {{ loanleads?.remarks | capitalizeFirst }}</textarea
                >
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
